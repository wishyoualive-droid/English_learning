<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>國小英語全方位學習系統 (優化版)</title>
    
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useMemo, useRef } = React;

        // ==========================================
        // 1. 資料處理與設定
        // ==========================================
        
        // ==========================================
        // 1. 完整資料庫 (1000+ 單字)
        // ==========================================
        const DEFAULT_RAW_DATA = [
            // 二年級上學期
            [2,1,1,"and","和,而且"],[2,1,2,"baby","寶貝,嬰兒"],[2,1,3,"bank","銀行"],[2,1,4,"bite","咬:啃"],[2,1,5,"blow","吹動;(風)刮走"],
            [2,1,6,"both","兩個(都)"],[2,1,7,"boy","男孩"],[2,1,8,"bring","帶來,拿來,引起"],[2,1,9,"burn","燃燒,燒焦,使曬黑"],[2,1,10,"candle","蠟燭"],
            [2,1,11,"careful","仔細的,小心的"],[2,1,12,"check","檢查"],[2,1,13,"child","小孩,兒童,"],[2,1,14,"cold","冷淡的,寒冷的,感冒"],[2,1,15,"count","計算,數數,認為"],
            [2,1,16,"daughter","女兒"],[2,1,17,"doll","玩偶,洋娃娃"],[2,1,18,"dress","穿衣,整理服裝,敷藥"],[2,1,19,"dry","乾的,乾燥的,弄乾,變乾"],
            [2,1,20,"easy","容易的,簡單的,自在的"],[2,1,21,"excuse","原諒,理由,請假單"],[2,1,22,"fast","快的,速度快的,緊緊地,牢固地"],[2,1,23,"fight","打架,爭吵,奮鬥"],
            [2,1,24,"fire","火,火災,開除,開槍"],[2,1,25,"floor","地板"],[2,1,26,"fly","飛翔,蒼蠅,褲子前開口"],[2,1,27,"French fries","炸薯條"],[2,1,28,"fry","油煎,油炸,油炒"],
            [2,1,29,"funny","有趣的,可笑的,笑話"],[2,1,30,"garden","花園,菜園,種植"],[2,1,31,"ghost","鬼,幽靈"],[2,1,32,"glad","高興的,快活的,樂意的"],[2,1,33,"grandfather","祖父,爺爺"],
            [2,1,34,"grandmother","奶奶"],[2,1,35,"grape","葡萄,葡萄樹,深紫色"],[2,1,36,"ground","地面,土地,場地"],[2,1,37,"guava","番石榴,芭樂"],[2,1,38,"hankie","手帕"],
            [2,1,39,"hard","困難的,硬的"],[2,1,40,"hit","打,打擊;擊中"],[2,1,41,"hot","熱的"],[2,1,42,"house","房子;住宅"],[2,1,43,"idea","主意,打算,想法,計畫"],
            [2,1,44,"into","到...裡面,成為"],[2,1,45,"keep","持有,保存,經營"],[2,1,46,"kid","小孩,兒童"],[2,1,47,"knock","敲,擊,打"],[2,1,48,"laugh","笑,笑聲,嘲笑"],
            [2,1,49,"low","低的,矮的,低聲的"],[2,1,50,"magic","魔法,魔術,有魔力的"],[2,1,51,"man","男人"],[2,1,52,"market","市場"],[2,1,53,"moon","月亮"],
            [2,1,54,"mud","污泥,泥巴,泥漿"],[2,1,55,"no","不要,沒有,否定,拒絕"],[2,1,56,"noodle","麵條"],[2,1,57,"office","辦公室,辦公樓"],[2,1,58,"out","出外;在外"],
            [2,1,59,"parent","父或母親,家長"],[2,1,60,"peach","桃子,粉紅色,桃紅色的"],[2,1,61,"people","人,人民"],[2,1,62,"pet","寵物"],[2,1,63,"picnic","野餐"],
            [2,1,64,"pie","派;餡餅"],[2,1,65,"playground","操場,運動場,遊樂場"],[2,1,66,"pond","池塘"],[2,1,67,"pork","豬肉"],[2,1,68,"price","價格,代價,給…定價"],
            [2,1,69,"push","推;向前擠"],[2,1,70,"quiet","安靜的,祕密的,平靜下來"],[2,1,71,"rain","雨,下雨"],[2,1,72,"restroom","休息室,廁所"],[2,1,73,"robot","機器人,呆板的人"],
            [2,1,74,"roll","滾動,打滾,擲(骰子),捲餅"],[2,1,75,"rose","玫瑰花"],[2,1,76,"sad","傷心,難過的"],[2,1,77,"salad","沙拉"],[2,1,78,"shine","發亮,陽光照耀,擦亮"],
            [2,1,79,"sky","天空"],[2,1,80,"slow","慢的,放慢,變慢"],[2,1,81,"snowman","雪人"],[2,1,82,"son","兒子"],[2,1,83,"spell","拼字,認真研究出,咒語"],
            [2,1,84,"spider","蜘蛛,設圈套的人"],[2,1,85,"station","車站"],[2,1,86,"still","還是,仍然,靜止的"],[2,1,87,"student","學生"],[2,1,88,"sure","一定的,確實的"],
            [2,1,89,"these","這些,這些的"],[2,1,90,"tidy","整潔的,整齊的,收拾,整理"],[2,1,91,"toast","土司,烤麵包,舉杯祝福"],[2,1,92,"tool","工具,器具,用具,方法"],[2,1,93,"towel","毛巾,手巾"],
            [2,1,94,"tree","樹"],[2,1,95,"turkey","火雞"],[2,1,96,"violin","小提琴,小提琴家"],[2,1,97,"wind","風"],[2,1,98,"worker","工人"],
            [2,1,99,"yes","是的"],[2,1,100,"afternoon","下午"],[2,1,101,"also","也,還,同樣地"],[2,1,102,"apple","蘋果"],[2,1,103,"arm","手臂"],
            [2,1,104,"bad","壞的,不好的"],[2,1,105,"ball","球"],[2,1,106,"bean","豆,豆莢,豆的果實"],[2,1,107,"bed","床"],[2,1,108,"big","大的,重大的"],
            [2,1,109,"bird","鳥"],[2,1,110,"box","箱;盒"],[2,1,111,"brother","兄弟,伙伴,朋友"],[2,1,112,"bun","圓麵包,小圓甜餅"],
            
            // 二年級下學期
            [2,2,1,"airport","飛機場"],[2,2,2,"aunt","姑姑"],[2,2,3,"bakery","麵包店"],[2,2,4,"bell","鐘聲,鈴聲,鳴鐘"],[2,2,5,"block","積木,街區"],
            [2,2,6,"board","木板,牌子"],[2,2,7,"bow","弓,鞠躬"],[2,2,8,"bridge","橋樑,鼻樑,架橋"],[2,2,9,"brush","刷,刷子"],[2,2,10,"cage","籠子,關在籠中"],
            [2,2,11,"card","卡片,紙牌"],[2,2,12,"castle","城堡"],[2,2,13,"chicken","雞"],[2,2,14,"classroom","教室"],[2,2,15,"comic","漫畫,喜劇,滑稽的"],
            [2,2,16,"crazy","瘋狂的,愚蠢的,著迷的"],[2,2,17,"dear","親愛的,尊敬的,哎呀"],[2,2,18,"dragon","龍,兇猛的人"],[2,2,19,"drum","鼓,鼓聲,咚咚地敲,打鼓"],[2,2,20,"each","每一個,各自的"],
            [2,2,21,"else","其他,另外"],[2,2,22,"farmer","農夫"],[2,2,23,"feed","餵(養),飼料,提供,一餐"],[2,2,24,"fill","裝滿,佈滿,食量"],[2,2,25,"fisherman","漁夫"],
            [2,2,26,"flower","花,開花"],[2,2,27,"forget","忘記,忽略,放棄"],[2,2,28,"fresh","新鮮的,新的,(風)強勁的,天氣寒冷的"],[2,2,29,"full","滿了,吃飽了"],[2,2,30,"game","遊戲,競賽,運動會"],
            [2,2,31,"gate","大門;柵欄門"],[2,2,32,"gift","禮物"],[2,2,33,"glue","膠,膠水,黏貼"],[2,2,34,"grandma","奶奶"],[2,2,35,"grandpa","爺爺"],
            [2,2,36,"grass","草地;草坪"],[2,2,37,"grow","成長,生長,種植,留長髮"],[2,2,38,"guess","猜測,猜中,認為"],[2,2,39,"happy","快樂的"],[2,2,40,"high","高的,高音調的,昂貴的"],
            [2,2,41,"hold","握著,抓住,保持,沒收"],[2,2,42,"hot dog","熱狗"],[2,2,43,"hungry","肚子餓了"],[2,2,44,"insect","昆蟲,蟲"],[2,2,45,"job","工作,作業"],
            [2,2,46,"kick","踢,踢腿"],[2,2,47,"kite","風箏"],[2,2,48,"lantern","燈籠"],[2,2,49,"look","注意,看"],[2,2,50,"mad","很生氣,瘋狂的,激動的"],
            [2,2,51,"mailman","郵差"],[2,2,52,"marble","彈珠,大理石"],[2,2,53,"meat","肉,果肉"],[2,2,54,"mop","拖把,亂髮,拖地,擦乾"],[2,2,55,"nail","釘子,指甲,(棒球)刺殺出局"],
            [2,2,56,"nod","點頭"],[2,2,57,"not","不是,不要,不會"],[2,2,58,"orange","柳橙,柳丁"],[2,2,59,"own","自己的,擁有,承認"],[2,2,60,"party","聚會,集會,派對"],
            [2,2,61,"pear","西洋梨,梨子"],[2,2,62,"person","人"],[2,2,63,"pick","選擇,採,摘"],[2,2,64,"picture","圖片,照片"],[2,2,65,"pin","別針,胸針,釘住"],
            [2,2,66,"police","警察,管理,監督"],[2,2,67,"popcorn","爆米花"],[2,2,68,"power","力量,能力,電源,權力"],[2,2,69,"prince","王子,貴族"],[2,2,70,"puzzle","猜謎的遊戲,拼圖"],
            [2,2,71,"race","賽跑,比賽,人種,種族"],[2,2,72,"rainbow","彩虹,彩色的"],[2,2,73,"rice","稻穀,米飯"],[2,2,74,"rock","岩石"],[2,2,75,"room","房間"],
            [2,2,76,"run","跑"],[2,2,77,"safe","安全的,平安的,保險箱"],[2,2,78,"sheep","綿羊"],[2,2,79,"sick","生病的"],[2,2,80,"sleep","睡覺,安息"],
            [2,2,81,"snow","雪,下雪"],[2,2,82,"snowy","下雪的,多雪的,雪白的"],[2,2,83,"sound","聲音,音調,發聲,聽起來"],[2,2,84,"spend","花錢,花時間,花費"],[2,2,85,"star","星星,明星"],
            [2,2,86,"stay","停留,留下,忍耐,保持"],[2,2,87,"store","商店,儲存"],[2,2,88,"sun","太陽"],[2,2,89,"true","真實的,事實,實情"],[2,2,90,"those","那些"],
            [2,2,91,"tired","疲倦的,好累的"],[2,2,92,"together","一起,合起來,相互"],[2,2,93,"touch","接觸,碰到,感動"],[2,2,94,"toy","玩具,玩物"],[2,2,95,"trip","旅行,遠足"],
            [2,2,96,"uncle","伯父;姨丈;舅舅"],[2,2,97,"wake","醒來,警覺,喚醒"],[2,2,98,"woman","婦女,女性"],[2,2,99,"yard","庭院,圈欄,碼(長度單位)"],[2,2,100,"all","全部"],
            [2,2,101,"am","是"],[2,2,102,"are","是(用於複數)"],[2,2,103,"at","在..地點,在..方面,向、對著"],[2,2,104,"bag","袋:提袋"],[2,2,105,"banana","香蕉"],
            [2,2,106,"bee","蜜蜂,蜂"],[2,2,107,"bingo","賓果遊戲,答對了"],[2,2,108,"boat","小船"],[2,2,109,"book","書本,書籍"],[2,2,110,"bread","麵包"],
            [2,2,111,"bug","蟲子"],

            // 三年級上學期
            [3,1,1,"agree","同意,贊成"],[3,1,2,"along","沿著,順著,向前"],[3,1,3,"ax","斧頭"],[3,1,4,"bench","長凳:長椅"],[3,1,5,"black","黑色,黑色的,黑人"],
            [3,1,6,"blue","藍色的"],[3,1,7,"bright","明亮的;發亮的"],[3,1,8,"cap","無邊帽子"],[3,1,9,"carry","挑,抱,背,提,攜帶,運送東西"],[3,1,10,"chalk","粉筆"],
            [3,1,11,"cheer","歡呼,喝采,鼓勵,乾杯"],[3,1,12,"clock","時鐘"],[3,1,13,"coat","外套,大衣"],[3,1,14,"comb","梳子,梳理,梳頭髮"],[3,1,15,"dark","黑暗的,黑皮膚的,邪惡的"],
            [3,1,16,"deal","交易,處理,發(紙牌)"],[3,1,17,"desk","書桌"],[3,1,18,"driver","司機"],[3,1,19,"elf","小精靈,頑皮的小孩"],[3,1,20,"family","家庭;家人"],
            [3,1,21,"fin","魚鰭"],[3,1,22,"flute","長笛,橫笛"],[3,1,23,"friend","朋友,友人"],[3,1,24,"glass","玻璃杯,一杯"],[3,1,25,"glove","手套"],
            [3,1,26,"green","綠色的"],[3,1,27,"gum","口香糖,黏合劑"],[3,1,28,"ham","火腿"],[3,1,29,"hat","帽子"],[3,1,30,"hear","聽見,聽說"],
            [3,1,31,"hippo","河馬"],[3,1,32,"hope","希望,盼望,可能性"],[3,1,33,"how","多少,多麼,怎麼"],[3,1,34,"ink","墨水;油墨"],[3,1,35,"jet","噴射機,噴出"],
            [3,1,36,"king","國王,(紙牌)K,統治"],[3,1,37,"lead","帶路,領導"],[3,1,38,"letter","信,字母"],[3,1,39,"lip","嘴唇,用嘴唇碰"],[3,1,40,"live","居住,活著,生活"],
            [3,1,41,"long","長的;遠的"],[3,1,42,"loud","大聲的,響亮的"],[3,1,43,"mark","記號,做記號,打分數"],[3,1,44,"mask","面具;口罩"],[3,1,45,"menu","菜單,飯菜,選單"],
            [3,1,46,"must","必須,一定是"],[3,1,47,"news","新聞,消息"],[3,1,48,"note","音符,筆記,注意到"],[3,1,49,"old","老的,舊的,老套的"],[3,1,50,"other","另一個的;其他的"],
            [3,1,51,"page","頁"],[3,1,52,"pink","粉紅色,桃紅色,典型"],[3,1,53,"place","地方,名次,放置"],[3,1,54,"plate","盤子,主菜,車子號碼牌"],[3,1,55,"pray","祈禱,祈求"],
            [3,1,56,"proud","驕傲的,得意的,自負的"],[3,1,57,"puppy","小狗"],[3,1,58,"quite","相當,非常"],[3,1,59,"ready","準備好的"],[3,1,60,"rest","休息,停止,安息"],
            [3,1,61,"right","右邊,馬上,正確的,正好"],[3,1,62,"rise","升起,上漲,起立,起床"],[3,1,63,"round","圓的,球形的,聲音宏亮的"],[3,1,64,"ruler","尺,直尺,統治者"],[3,1,65,"same","一樣的,相同的"],
            [3,1,66,"seat","座,座位"],[3,1,67,"sell","販售,賣"],[3,1,68,"shark","鯊魚"],[3,1,69,"shoe","鞋子"],[3,1,70,"short","短的,矮的"],
            [3,1,71,"shout","呼喊,喊叫,大聲說出"],[3,1,72,"sight","視力,視覺,視野"],[3,1,73,"sir","先生,老師"],[3,1,74,"size","尺碼,尺寸大小"],[3,1,75,"skirt","裙子;襯裙"],
            [3,1,76,"stamp","郵票,跺腳,蓋章於"],[3,1,77,"straw","稻草,吸管"],[3,1,78,"study","學習,研究,用功"],[3,1,79,"tall","高的,高大的"],[3,1,80,"tape","膠布,捲尺,錄音(影)帶"],
            [3,1,81,"test","測驗,小考,考驗"],[3,1,82,"thick","厚的,粗的,濃厚的"],[3,1,83,"thing","東西,事物,事情"],[3,1,84,"throw","丟擲"],[3,1,85,"today","今天"],
            [3,1,86,"trick","詭計,計謀,欺騙,耍花招"],[3,1,87,"twelve","十二,十二個的"],[3,1,88,"type","類型,型式,樣式"],[3,1,89,"until","直到...時,到...為止"],[3,1,90,"visit","參觀;拜訪;探望"],
            [3,1,91,"watch","看,錶,看守,監視"],[3,1,92,"wave","揮動,揮手,波浪"],[3,1,93,"wet","濕的,淋濕,下雨"],[3,1,94,"what","什麼"],[3,1,95,"where","在哪裡,何處,地點"],
            [3,1,96,"who","是誰,什麼人"],[3,1,97,"win","獲勝,獲得"],[3,1,98,"world","世界,地球"],[3,1,99,"write","寫,寫字,寫信"],[3,1,100,"wrong","錯誤的,罪惡"],
            [3,1,101,"butterfly","蝴蝶"],[3,1,102,"can","能,會,可以,罐頭"],[3,1,103,"cat","貓咪"],[3,1,104,"chair","椅子"],[3,1,105,"clap","拍手,鼓掌"],
            [3,1,106,"cookie","點心,甜點"],[3,1,107,"cup","杯子,使(手掌)成杯狀"],[3,1,108,"dog","狗"],[3,1,109,"dot","點,小圓點,佈滿"],[3,1,110,"drink","飲,喝;飲料"],
            [3,1,111,"ear","耳朵,聽覺,稻穗"],[3,1,112,"egg","蛋;卵"],[3,1,113,"evening","傍晚,晚上,晚會,末期"],[3,1,114,"face","臉,面對著"],[3,1,115,"fine","美好的,很好,好天氣,罰金"],

            // 三年級下學期
            [3,2,1,"afraid","害怕的"],[3,2,2,"ahead","在前,向前,事先"],[3,2,3,"angry","發怒的,生氣的"],[3,2,4,"anyone","任何人,無論誰"],[3,2,5,"around","到處,四處"],
            [3,2,6,"band","樂團,橡皮圈,帶,細繩"],[3,2,7,"bat","球棒,蝙蝠,球拍,擊球"],[3,2,8,"belt","腰帶;帶"],[3,2,9,"bike","腳踏車"],[3,2,10,"born","出生的,天生的"],
            [3,2,11,"brown","褐色,棕色,咖啡色的"],[3,2,12,"care","看護,照料,關心,在乎"],[3,2,13,"case","事件,實例,事實"],[3,2,14,"cheap","便宜的,價廉的"],[3,2,15,"chess","西洋棋"],
            [3,2,16,"clerk","職員,店員,銷售員"],[3,2,17,"close","關上,合起"],[3,2,18,"color","色彩,顏色"],[3,2,19,"copy","複製,抄襲,模仿,1份複製"],[3,2,20,"cute","可愛的,聰明的"],
            [3,2,21,"day","一天"],[3,2,22,"drawer","抽屜,內褲"],[3,2,23,"drive","開車,驅趕,逼迫,車程,車道"],[3,2,24,"eleven","十一,十一個的"],[3,2,25,"fact","事實"],
            [3,2,26,"fat","肥胖的"],[3,2,27,"finish","完成,結束,結局,吃完"],[3,2,28,"for","為,為了"],[3,2,29,"Friday","星期五"],[3,2,30,"gas","瓦斯,天然氣,氣體,麻醉氣"],
            [3,2,31,"gray","灰色,陰暗的"],[3,2,32,"hate","討厭,厭惡"],[3,2,33,"heat","熱度,高溫"],[3,2,34,"hotel","旅館"],[3,2,35,"hurry","趕緊,匆忙,催促,急送"],
            [3,2,36,"kill","殺死,打發時間"],[3,2,37,"kiss","吻,親嘴,輕拂"],[3,2,38,"large","範圍大的,龐大的,多數的"],[3,2,39,"lesson","一課,一節課,教訓"],[3,2,40,"like","喜歡,像"],
            [3,2,41,"list","名冊;目錄;列出;列舉"],[3,2,42,"lose","失去,遺失,輸掉"],[3,2,43,"love","愛"],[3,2,44,"marker","做記號的人,麥克筆"],[3,2,45,"mean","意思是,小氣的,討人厭的,平均數"],
            [3,2,46,"miss","錯過,沒擊中,想念"],[3,2,47,"MRT","捷運"],[3,2,48,"new","新的;新型的"],[3,2,49,"nice","好心的,好的"],[3,2,50,"notice","注意,通知,提到,公告"],
            [3,2,51,"oil","油,油畫顏料"],[3,2,52,"open","打開,打開的,開幕"],[3,2,53,"pack","收拾行李,包裝,一捆,一包"],[3,2,54,"pants","長褲"],[3,2,55,"paste","黏貼上,漿糊,麵糰"],
            [3,2,56,"pipe","水管,輸送管,管樂器,笛子"],[3,2,57,"plan","計劃:辦法;打算"],[3,2,58,"player","遊戲的人,選手"],[3,2,59,"prize","獎賞,珍惜,戰利品,撬開"],[3,2,60,"purple","紫的,紫紅的"],
            [3,2,61,"ran","跑(run 的過去式)"],[3,2,62,"real","真正的,真心的,真實的"],[3,2,63,"red","紅色的"],[3,2,64,"ride","騎"],[3,2,65,"ring","戒指,耳環,搖鈴,鈴響"],
            [3,2,66,"rule","規則,規定,統治,裁決"],[3,2,67,"sail","航行,乘船,出發,帆"],[3,2,68,"screen","銀幕,屏,幕"],[3,2,69,"seed","種子,起源"],[3,2,70,"send","寄,發送,傳達,派遣"],
            [3,2,71,"shake","搖動,握(手)"],[3,2,72,"shirt","襯衫;男式襯衫"],[3,2,73,"shop","商店,購物,逛街"],[3,2,74,"shorts","運動短褲"],[3,2,75,"sign","標誌,招牌,暗號,簽名"],
            [3,2,76,"singer","歌手"],[3,2,77,"skate","溜冰,滑板"],[3,2,78,"smart","精明的,輕快的"],[3,2,79,"sock","短襪,(用拳)猛擊"],[3,2,80,"stairs","樓梯,階梯"],
            [3,2,81,"story","故事;傳聞"],[3,2,82,"surf","衝浪運動,瀏覽網路"],[3,2,83,"tank","水箱,魚缸,坦克車"],[3,2,84,"than","比,比較,超過"],[3,2,85,"thin","薄的;細的;瘦的"],
            [3,2,86,"total","合計是,完全的"],[3,2,87,"twice","兩遍,兩倍"],[3,2,88,"useful","有用的,有幫助的"],[3,2,89,"voice","聲音,嗓子,表達,發言權"],[3,2,90,"want","想要"],
            [3,2,91,"wear","穿著;戴著"],[3,2,92,"week","一星期"],[3,2,93,"whale","鯨魚"],[3,2,94,"when","何時,當...時"],[3,2,95,"white","白色的"],
            [3,2,96,"why","為什麼"],[3,2,97,"word","字"],[3,2,98,"worry","擔心,憂慮,煩惱"],[3,2,99,"yellow","黃色的"],[3,2,100,"young","年輕的,幼小的"],
            [3,2,101,"bus","巴士,公車"],[3,2,102,"cake","蛋糕,糕餅"],[3,2,103,"candy","糖果"],[3,2,104,"car","汽車,火車車廂"],[3,2,105,"catch","接住,趕上,接球,捕捉,理解"],
            [3,2,106,"come","來,到達"],[3,2,107,"cow","牛,母牛,母象,母鯨,恐嚇"],[3,2,108,"dad","爸爸,父親"],[3,2,109,"door","門"],[3,2,110,"down","向下;在下面"],
            [3,2,111,"duck","鴨子"],[3,2,112,"eat","吃;用餐"],[3,2,113,"eight","八"],[3,2,114,"eye","眼睛"],[3,2,115,"farm","農場,飼養場"],

            // 四年級上學期
            [4,1,1,"action","行動;行為"],[4,1,2,"again","再,再一次"],[4,1,3,"answer","答案,回答"],[4,1,4,"art","藝術:美術"],[4,1,5,"bake","烘,烤(麵包),被烘乾,被曬黑"],
            [4,1,6,"base","基礎,來源,基地"],[4,1,7,"before","在...以前,在...之前"],[4,1,8,"boil","煮沸,燒開"],[4,1,9,"boring","無聊的,沒趣的"],[4,1,10,"bottle","瓶子,裝入瓶中"],
            [4,1,11,"business","事情,商業,生意,公事,公司"],[4,1,12,"but","但是,然而,只,僅僅"],[4,1,13,"buy","買,購買,請客"],[4,1,14,"can't","不行,不能"],[4,1,15,"change","改變,交換,換衣服尿布,兌換(錢)"],
            [4,1,16,"cheat","作弊,欺騙,騙取"],[4,1,17,"China","中國,瓷器,陶瓷器"],[4,1,18,"class","班級,課,上課"],[4,1,19,"collect","收集,採集,集合"],[4,1,20,"corner","角,街角,困境,轉彎"],
            [4,1,21,"cousin","堂(或表)兄弟;堂(或表)姐妹"],[4,1,22,"decide","決定,判決"],[4,1,23,"difficult","困難的,難相處的"],[4,1,24,"do","做,製作,(助動詞)"],[4,1,25,"doesn't","不要,不會,不是(第3人稱使用)"],
            [4,1,26,"donkey","驢子,頑固的人"],[4,1,27,"dozen","一打,十二個"],[4,1,28,"early","早的;提早的"],[4,1,29,"enjoy","享受,欣賞,喜愛"],[4,1,30,"even","平的,平手的,平坦的,甚至,偶數"],
            [4,1,31,"fail","失敗,不及格"],[4,1,32,"few","很少的,快沒有的"],[4,1,33,"find","找到,發現"],[4,1,34,"food","食物,食品"],[4,1,35,"forty","四十,四十個的"],
            [4,1,36,"fun","有趣,樂趣"],[4,1,37,"grab","奪取,匆忙地抓取"],[4,1,38,"gram","(重量單位)克"],[4,1,39,"half","一半,二分之一,半(價)票"],[4,1,40,"hang","把...掛起,懸掛,掛斷電話"],
            [4,1,41,"help","幫助,幫手,治療"],[4,1,42,"history","歷史,由來"],[4,1,43,"honey","蜂蜜,寶貝兒,可愛的"],[4,1,44,"hour","小時,時刻,時間"],[4,1,45,"ice","冰,冰的,結冰"],
            [4,1,46,"join","加入,參與,結合"],[4,1,47,"knife","小刀:菜刀"],[4,1,48,"learn","學習,認識"],[4,1,49,"library","圖書館"],[4,1,50,"line","繩,線,排隊"],
            [4,1,51,"little","幼小的,少,不多的"],[4,1,52,"lunch","午餐"],[4,1,53,"math","數學"],[4,1,54,"maybe","大概,或許,可能"],[4,1,55,"meeting","會議,會面,集會"],
            [4,1,56,"mind","介意,心思,頭腦,智慧"],[4,1,57,"mistake","錯誤,弄錯"],[4,1,58,"more","更多的"],[4,1,59,"museum","博物館,展覽館"],[4,1,60,"name","姓名,外號,命名,列舉"],
            [4,1,61,"net","網子,用網捕,網路"],[4,1,62,"ninety","九十"],[4,1,63,"noon","正午,中午"],[4,1,64,"order","命令,點菜,訂貨,秩序"],[4,1,65,"pair","雙"],
            [4,1,66,"planet","行星,地球"],[4,1,67,"play","玩耍,遊戲,演奏,扮演(角色)"],[4,1,68,"pot","罐;壺;鍋"],[4,1,69,"problem","難題,問題"],[4,1,70,"quiz","測驗"],
            [4,1,71,"recorder","直笛,錄音機,攝影機"],[4,1,72,"repeat","重複,跟讀,重播的節目"],[4,1,73,"rope","繩,索"],[4,1,74,"sandwich","三明治"],[4,1,75,"school","學校"],
            [4,1,76,"second","秒,片刻,第二(個),二分之"],[4,1,77,"share","分享:均分"],[4,1,78,"should","將,應該"],[4,1,79,"since","既然,從...至今"],[4,1,80,"slide","滑動,滑落,滑梯"],
            [4,1,81,"smell","嗅,聞起來"],[4,1,82,"soda","汽水,蘇打水"],[4,1,83,"spoon","湯匙,舀取"],[4,1,84,"start","開始,出發"],[4,1,85,"stop","停止,阻止,公車站牌"],
            [4,1,86,"swim","游泳"],[4,1,87,"talk","談話;交談"],[4,1,88,"they","他們"],[4,1,89,"thirty","三十"],[4,1,90,"time","時間"],
            [4,1,91,"treat","對待,招待"],[4,1,92,"tub","浴缸,桶,木盆"],[4,1,93,"us","我們(we的受格)"],[4,1,94,"van","箱形車"],[4,1,95,"very","非常,很"],
            [4,1,96,"waiter","服務員,侍者"],[4,1,97,"whose","誰的,那個人的"],[4,1,98,"wish","想要,希望,願望"],[4,1,99,"year","年,年級,年紀"],[4,1,100,"zip","拉鍊,拉拉鍊,以尖嘯聲行進"],
            [4,1,101,"five","五"],[4,1,102,"four","四;四個"],[4,1,103,"frog","蛙,青蛙"],[4,1,104,"go","去,走"],[4,1,105,"goose","鵝,鵝肉,傻瓜"],
            [4,1,106,"hand","手"],[4,1,107,"head","頭"],[4,1,108,"hello","喂,你好"],[4,1,109,"home","家,住家"],[4,1,110,"horse","馬"],
            [4,1,111,"is","是"],[4,1,112,"jump","(雙腳)跳"],[4,1,113,"key","鑰匙;祕訣;答案"],[4,1,114,"koala","無尾熊"],[4,1,115,"many","很多的"],

            // 四年級下學期
            [4,2,1,"after","在...以後,在...後面,模仿,儘管"],[4,2,2,"already","已經;先前"],[4,2,3,"ask","問,要求,請求,索(價)"],[4,2,4,"beef","牛肉,抱怨"],[4,2,5,"blanket","毛毯,毯子,掩蓋"],
            [4,2,6,"bored","無聊的,厭倦的"],[4,2,7,"borrow","借用,借東西"],[4,2,8,"bowl","碗,碗狀物,圓形劇場"],[4,2,9,"butter","奶油,甜言蜜語,塗奶油"],[4,2,10,"call","把...叫做,打電話"],
            [4,2,11,"chant","歌,曲子,詠唱,吟誦"],[4,2,12,"cheese","乳酪"],[4,2,13,"choose","選擇,挑選,決定"],[4,2,14,"circle","圓圈,畫圓圈,旋轉"],[4,2,15,"club","俱樂部,社團,棒打,募集"],
            [4,2,16,"common","常見的,一般的,公地"],[4,2,17,"cost","花費,費用,成本"],[4,2,18,"dance","跳舞,舞蹈,舞會,旗子飄揚"],[4,2,19,"date","日期,約見,約會,寫上日期"],[4,2,20,"dish","碟子,菜餚,餐具,打菜"],
            [4,2,21,"does","做,製作(第三人稱單數),助動詞"],[4,2,22,"done","做好了,完成了(過去分詞)"],[4,2,23,"don't","不要,不會"],[4,2,24,"draw","畫,描寫,抽籤,拖長,吸引"],[4,2,25,"eighty","八十,八十的"],
            [4,2,26,"enough","充足的,足夠,非常"],[4,2,27,"every","每一,每個"],[4,2,28,"except","除...之外"],[4,2,29,"factory","工廠"],[4,2,30,"feel","摸,觸覺,感覺"],
            [4,2,31,"fifty","五十"],[4,2,32,"fix","修理,安排"],[4,2,33,"fork","叉子,岔路"],[4,2,34,"goat","山羊"],[4,2,35,"grade","年級,等級"],
            [4,2,36,"gym","體育館,體操"],[4,2,37,"heavy","很重的"],[4,2,38,"helpful","有幫助的,有益的"],[4,2,39,"holiday","假日"],[4,2,40,"inch","英吋"],
            [4,2,41,"invite","邀請"],[4,2,42,"juicy","多汁的,有趣的"],[4,2,43,"know","知道,認識,了解"],[4,2,44,"late","遲到的,最近的,前任的"],[4,2,45,"less","較少的,更少的"],
            [4,2,46,"life","生命,生存,人生"],[4,2,47,"listen","注意聽,傾聽"],[4,2,48,"lot","很多,多數,命運"],[4,2,49,"machine","機器,交通工具"],[4,2,50,"matter","事情,問題,重要性"],
            [4,2,51,"meet","遇見,開會,迎接,運動會"],[4,2,52,"million","百萬,百萬的"],[4,2,53,"minute","分(鐘),一會兒"],[4,2,54,"monkey","猴子,頑童,搗蛋"],[4,2,55,"most","大部分,大多數"],
            [4,2,56,"music","音樂,樂譜"],[4,2,57,"near","近,接近,幾乎的"],[4,2,58,"next","接下去的;下一個"],[4,2,59,"noise","噪音,吵鬧聲,聲音"],[4,2,60,"o'clock","(時間單位)點鐘,整點"],
            [4,2,61,"over","大於,超過,結束,覆蓋,倒下"],[4,2,62,"part","一部分,零件"],[4,2,63,"plant","植物,種植,發電廠,工廠"],[4,2,64,"prepare","準備,預備"],[4,2,65,"public","公共的,政府的,民眾"],
            [4,2,66,"quick","快的,迅速的"],[4,2,67,"raise","舉起,抬起"],[4,2,68,"reporter","記者"],[4,2,69,"row","划(船),一列"],[4,2,70,"salt","鹽,鹹(味)的,加鹽"],
            [4,2,71,"say","說,講,發表"],[4,2,72,"scooter","機車,踏板車,滑板車"],[4,2,73,"seventy","七十,七十個"],[4,2,74,"shape","形狀,樣子,外形,瘦身"],[4,2,75,"sharp","機警的,鋒利的,明顯的,急轉的"],
            [4,2,76,"show","顯示,表演,演出"],[4,2,77,"sixty","六十"],[4,2,78,"slim","苗條的;纖細的"],[4,2,79,"snake","蛇,曲折前進,奸險的人"],[4,2,80,"someone","某人,有人"],
            [4,2,81,"sour","酸味的,酸臭的,變酸"],[4,2,82,"square","正方形,廣場,平方,正直的"],[4,2,83,"steak","牛排;肉排;魚排"],[4,2,84,"sugar","糖,親愛的,加糖"],[4,2,85,"tail","尾巴"],
            [4,2,86,"tell","告訴;辨別"],[4,2,87,"think","以為,思考,猜想"],[4,2,88,"though","雖然;儘管"],[4,2,89,"tie","領帶,綁"],[4,2,90,"too","也"],
            [4,2,91,"try","嘗試,努力,試用"],[4,2,92,"twenty","二十,二十個"],[4,2,93,"vase","花瓶"],[4,2,94,"wait","等待,盼望"],[4,2,95,"which","哪一個,哪一些,這個,這些"],
            [4,2,96,"wig","假髮"],[4,2,97,"without","沒有,缺乏"],[4,2,98,"yam","山芋類植物"],[4,2,99,"yummy","好吃的;美味的"],[4,2,100,"ZOO","動物園"],
            [4,2,101,"father","爸爸"],[4,2,102,"fish","魚,魚肉,釣魚"],[4,2,103,"foot","腳,足部;步行"],[4,2,104,"free","免費的,自由的,空著的"],[4,2,105,"girl","女孩,姑娘,女朋友"],
            [4,2,106,"good","好的,好心的"],[4,2,107,"hair","頭髮,毛髮"],[4,2,108,"he","他"],[4,2,109,"heart","心臟;內心;心形的"],[4,2,110,"here","這裡"],
            [4,2,111,"hop","用單腳跳著走,跳上"],[4,2,112,"I","我"],[4,2,113,"juice","果汁"],[4,2,114,"kangaroo","袋鼠"],[4,2,115,"knee","膝蓋,膝部"],

            // 五年級上學期
            [5,1,1,"across","橫越,穿過,在...那邊,寬,各處"],[5,1,2,"actress","女演員"],[5,1,3,"ago","(一段時間)以前"],[5,1,4,"always","總是,經常"],[5,1,5,"American","美國人,美國的"],
            [5,1,6,"another","另外的,另外一個"],[5,1,7,"anything","任何東西,重要事物"],[5,1,8,"appear","出現,看來"],[5,1,9,"August","八月"],[5,1,10,"badminton","羽毛球"],
            [5,1,11,"basket","籃,簍,筐"],[5,1,12,"bathroom","浴室,化妝室,廁所"],[5,1,13,"bear","熊,承受,忍受"],[5,1,14,"become","變成,成為"],[5,1,15,"believe","相信,信任,信仰,猜想"],
            [5,1,16,"better","更好的,較好者,改善"],[5,1,17,"brave","勇敢的,勇士,勇敢面對,冒犯"],[5,1,18,"busy","忙碌的"],[5,1,19,"classmate","同班同學"],[5,1,20,"clean","清除,打掃,清潔的,公正的"],
            [5,1,21,"coffee","咖啡,咖啡色"],[5,1,22,"cola","可樂"],[5,1,23,"computer","電腦"],[5,1,24,"cool","涼快的"],[5,1,25,"correct","正確的,批改,改正,責備"],
            [5,1,26,"crayon","蠟筆,炭筆,顏色粉筆"],[5,1,27,"delicious","美味的;香噴噴的"],[5,1,28,"dinner","晚餐,正餐"],[5,1,29,"doctor","醫師,博士,治療"],[5,1,30,"dream","做夢,願望,白日夢,幻想"],
            [5,1,31,"dumpling","餃子,水餃,餛飩"],[5,1,32,"eighteen","十八"],[5,1,33,"eighth","第八的,八分之一"],[5,1,34,"elephant","大象"],[5,1,35,"eraser","橡皮擦"],
            [5,1,36,"eve","傍晚,黃昏,前一晚"],[5,1,37,"everything","每件事,最重要的東西"],[5,1,38,"example","例子"],[5,1,39,"experience","經驗,體驗,感受"],[5,1,40,"far","遠的,較遠的,遠方"],
            [5,1,41,"fifth","第五的,五分之一的"],[5,1,42,"follow","跟隨"],[5,1,43,"foreigner","外國人"],[5,1,44,"fourteen","十四,十四個的"],[5,1,45,"fruit","水果,果實,結果實"],
            [5,1,46,"garbage","垃圾,剩菜,廢話"],[5,1,47,"get","獲得,得到,捉住"],[5,1,48,"gone","過去,失去,去(go 的過去分詞)"],[5,1,49,"had","有,持有,吃東西(have 的過去式)"],[5,1,50,"has","有,持有(have的第三人稱單數)"],
            [5,1,51,"health","健康"],[5,1,52,"his","他的"],[5,1,53,"hunt","打獵,追捕"],[5,1,54,"husband","丈夫,節儉使用"],[5,1,55,"important","重要的,重大的"],
            [5,1,56,"January","一月"],[5,1,57,"July","七月"],[5,1,58,"kitchen","廚房"],[5,1,59,"knowledge","知識,學問"],[5,1,60,"last","最後的"],
            [5,1,61,"lawyer","律師"],[5,1,62,"least","最小的,最少的,最少"],[5,1,63,"lend","借給"],[5,1,64,"lion","獅子"],[5,1,65,"lovely","可愛的"],
            [5,1,66,"master","主人,大師,精通的,主要的"],[5,1,67,"meal","餐,進餐"],[5,1,68,"medium","中間,中等的,中級"],[5,1,69,"Monday","星期一"],[5,1,70,"money","錢,薪水,財產"],
            [5,1,71,"movie","電影,電影的"],[5,1,72,"need","需要,必須"],[5,1,73,"never","從未;不可能"],[5,1,74,"nineteen","十九"],[5,1,75,"November","十一月"],
            [5,1,76,"October","十月"],[5,1,77,"officer","軍官,官員,警官"],[5,1,78,"once","一次,曾經"],[5,1,79,"papaya","木瓜,青木瓜"],[5,1,80,"past","過去的;前任的"],
            [5,1,81,"pocket","衣袋,口袋,放進衣袋"],[5,1,82,"poor","貧窮的,可憐的"],[5,1,83,"possible","可能的,合理的"],[5,1,84,"present","禮物,目前的,出席的"],[5,1,85,"princess","公主;王妃"],
            [5,1,86,"question","問題,詢問,懷疑"],[5,1,87,"really","真正的,真心的,真實的"],[5,1,88,"rich","富有的,豐富的,肥沃的"],[5,1,89,"scared","吃驚的,害怕的,不敢的"],[5,1,90,"season","季節,加味於"],
            [5,1,91,"September","九月"],[5,1,92,"seventeen","十七"],[5,1,93,"shall","將會,必須,應該"],[5,1,94,"simple","簡單的"],[5,1,95,"snack","小吃,點心,快餐"],
            [5,1,96,"soccer","足球"],[5,1,97,"soldier","軍人,士兵,硬挺着"],[5,1,98,"soon","早,不久,很快地"],[5,1,99,"spring","春天"],[5,1,100,"strong","強壯的,強勁的,濃烈的"],
            [5,1,101,"Sunday","星期日"],[5,1,102,"supermarket","超級市場"],[5,1,103,"sweet","甜的,芳香的,好聽的,糖果,甜點,親愛的"],[5,1,104,"take","拿,取,需要,花費"],[5,1,105,"teenager","13至19歲的青少年"],
            [5,1,106,"terrible","可怕的,嚇人的,嚴重的"],[5,1,107,"then","那時,當時,然後"],[5,1,108,"thirsty","口渴的,渴望,乾旱的"],[5,1,109,"tiger","老虎"],[5,1,110,"tonight","今晚"],
            [5,1,111,"trouble","麻煩,打擾,困境,憂慮"],[5,1,112,"umbrella","傘,雨傘"],[5,1,113,"understand","懂,理解,瞭解"],[5,1,114,"vampire","吸血鬼"],[5,1,115,"vest","背心,汗衫"],
            [5,1,116,"wallet","皮夾子,錢包"],[5,1,117,"Wednesday","星期三"],[5,1,118,"weekend","週末"],[5,1,119,"well","很好地;嗯,好吧"],[5,1,120,"winter","冬天,過冬,晚年"],
            [5,1,121,"with","與..一起,和...帶著...有...的"],[5,1,122,"yesterday","昨天"],[5,1,123,"zebra","斑馬"],[5,1,124,"milk","牛奶"],[5,1,125,"mommy","媽咪,母親"],
            [5,1,126,"mother","母親;媽媽"],[5,1,127,"mouth","嘴巴"],[5,1,128,"my","我的"],[5,1,129,"night","晚上,夜間的"],[5,1,130,"nose","鼻子"],
            [5,1,131,"one","1"],[5,1,132,"pen","筆,鋼筆,獸欄"],[5,1,133,"pig","豬"],[5,1,134,"pool","水塘,水池,游泳池"],[5,1,135,"rat","老鼠,野鼠"],
            [5,1,136,"see","看見"],[5,1,137,"seven","七"],[5,1,138,"ship","船,艦"],

            // 五年級下學期
            [5,2,1,"actor","男演員;演員"],[5,2,2,"age","年齡,時代,變老"],[5,2,3,"almost","幾乎,差不多"],[5,2,4,"America","美國"],[5,2,5,"animal","動物,動物的"],
            [5,2,6,"April","四月"],[5,2,7,"autumn","秋季,秋天,秋天的"],[5,2,8,"bath","洗澡,浴盆,游泳池"],[5,2,9,"beautiful","美麗的"],[5,2,10,"bedroom","臥室,房間"],
            [5,2,11,"belong","屬於,歸某人所有"],[5,2,12,"blackboard","黑板"],[5,2,13,"bookstore","書店,書局"],[5,2,14,"breakfast","早餐,吃早餐"],[5,2,15,"chance","機會,可能性,碰巧的"],
            [5,2,16,"church","教堂,教會"],[5,2,17,"clothes","服裝,衣服"],[5,2,18,"Coke","可口可樂"],[5,2,19,"comfortable","舒服的,自在的,豐富的"],[5,2,20,"convenient","方便的,便利的"],
            [5,2,21,"course","課程,科目,當然,跑道,場地"],[5,2,22,"December","十二月"],[5,2,23,"dentist","牙科醫生"],[5,2,24,"department store","百貨公司"],[5,2,25,"dining room","餐廳,吃飯的地方"],
            [5,2,26,"dirty","骯髒的,令人厭惡的"],[5,2,27,"dollar","元(錢的單位)"],[5,2,28,"during","在…期間"],[5,2,29,"Easter","復活節"],[5,2,30,"either","也,而且,兩者之一的"],
            [5,2,31,"engineer","工程師,設計師"],[5,2,32,"envelope","信封,外殼"],[5,2,33,"ever","曾經,永遠,始終"],[5,2,34,"everyone","每人,人人"],[5,2,35,"excited","激動的,興奮的"],
            [5,2,36,"exciting","令人興奮的;令人激動的"],[5,2,37,"fall","掉下來,落下,跌倒,秋天"],[5,2,38,"February","二月"],[5,2,39,"fifteen","十五個"],[5,2,40,"first","第一的,最先的,首先,開始"],
            [5,2,41,"foreign","外國的,外來的"],[5,2,42,"fourth","第4個的;四分之一"],[5,2,43,"frisbee","飛盤,飛碟"],[5,2,44,"future","未來,前途"],[5,2,45,"give","給;送給"],
            [5,2,46,"glasses","眼鏡,雙筒望遠鏡"],[5,2,47,"great","很大的,好極了,優秀的,偉人"],[5,2,48,"guitar","吉他"],[5,2,49,"handsome","英俊的"],[5,2,50,"happen","發生,碰巧"],
            [5,2,51,"have","有,取得,吃,喝,叫,使"],[5,2,52,"her","她(女生),她的"],[5,2,53,"homework","家庭作業"],[5,2,54,"honest","誠實的;真誠的"],[5,2,55,"hurt","使受傷,受傷的,疼痛"],
            [5,2,56,"ice cream","冰淇淋"],[5,2,57,"interest","興趣;愛好"],[5,2,58,"interesting","有趣的"],[5,2,59,"jacket","夾克,上衣,書的護套"],[5,2,60,"jeans","牛仔褲"],
            [5,2,61,"June","六月"],[5,2,62,"lamp","燈,油燈,燈火"],[5,2,63,"later","遲到的,較晚的,前任的,最近的"],[5,2,64,"lazy","懶散的,慢吞吞的,馬虎的"],[5,2,65,"lemon","檸檬,淡黃色,檸檬汁"],
            [5,2,66,"lettuce","萵苣(一種綠色蔬菜)"],[5,2,67,"lonely","寂寞的,孤獨的"],[5,2,68,"March","三月,行進"],[5,2,69,"May","五月"],[5,2,70,"medicine","藥,醫學"],
            [5,2,71,"moment","瞬間,片刻,時機"],[5,2,72,"month","月份,一個月"],[5,2,73,"naughty","頑皮的,不聽話的"],[5,2,74,"neighbor","鄰居,鄰近的,與...為鄰"],[5,2,75,"ninth","第九,九分之一"],
            [5,2,76,"nobody","無人,沒有人"],[5,2,77,"nurse","護士"],[5,2,78,"often","常常,時常"],[5,2,79,"only","唯一的,只有,才"],[5,2,80,"photo","照片,相片"],
            [5,2,81,"popular","受歡迎的"],[5,2,82,"post office","郵局"],[5,2,83,"practice","練習,實踐,訓練"],[5,2,84,"pretty","漂亮的,非常"],[5,2,85,"program","程式,節目,設計程式"],
            [5,2,86,"pumpkin","南瓜"],[5,2,87,"restaurant","餐館,飯店"],[5,2,88,"sale","販售(名詞)"],[5,2,89,"Saturday","星期六"],[5,2,90,"seldom","不常的,很少;難得"],
            [5,2,91,"seventh","第七的,七分之一"],[5,2,92,"shy","怕羞的,羞怯的"],[5,2,93,"sidewalk","人行道"],[5,2,94,"sixteen","十六"],[5,2,95,"sometimes","有時,有時候"],
            [5,2,96,"soup","湯"],[5,2,97,"spaceship","太空船"],[5,2,98,"stranger","陌生人,外地人"],[5,2,99,"strawberry","草莓"],[5,2,100,"street","街,街道"],
            [5,2,101,"stupid","愚笨的,可笑的,傻瓜"],[5,2,102,"summer","夏天,夏季"],[5,2,103,"sweater","毛衣"],[5,2,104,"table","桌子,餐桌,乘法表"],[5,2,105,"taste","味覺,味道,嚐到,嚐起來"],
            [5,2,106,"temple","寺廟,神殿,教堂,太陽穴,鬢角"],[5,2,107,"tenth","第十(個),十分之一"],[5,2,108,"theater","劇場,電影院"],[5,2,109,"third","第三,第三的"],[5,2,110,"thirteen","十三個"],
            [5,2,111,"Thursday","星期四"],[5,2,112,"ticket","票"],[5,2,113,"tomato","番茄"],[5,2,114,"tomorrow","明天"],[5,2,115,"T-shirt","短袖圓領運動衫"],
            [5,2,116,"under","在...下面,少於,低於"],[5,2,117,"usually","通常地;慣常地"],[5,2,118,"vegetable","蔬菜,青菜,植物人"],[5,2,119,"weak","虛弱的"],[5,2,120,"wife","妻子,太太"],
            [5,2,121,"witch","女巫,巫婆"],[5,2,122,"yet","還(沒),依然"],[5,2,123,"leg","腿,腳"],[5,2,124,"me","我"],[5,2,125,"mom","媽咪,母親"],
            [5,2,126,"mouse","老鼠,滑鼠"],[5,2,127,"much","許多;大量的"],[5,2,128,"neck","頸,脖子"],[5,2,129,"nine","九"],[5,2,130,"now","現在,馬上"],
            [5,2,131,"park","公園:停車"],[5,2,132,"pencil","鉛筆"],[5,2,133,"pizza","肉餡餅;比薩餅"],[5,2,134,"rabbit","兔子"],[5,2,135,"read","讀,念"],
            [5,2,136,"seesaw","蹺蹺板,前後動的"],[5,2,137,"she","她"],

            // 六年級上學期
            [6,1,1,"about","大約在,關於,對於"],[6,1,2,"abroad","在國外,到國外,在外面,散開"],[6,1,3,"airplane","飛機"],[6,1,4,"ant","螞蟻"],[6,1,5,"attack","攻擊"],
            [6,1,6,"back","回來"],[6,1,7,"barbecue","烤肉"],[6,1,8,"basketball","籃球,籃球運動"],[6,1,9,"begin","開始,啟動"],[6,1,10,"below","在下面,在...下面"],
            [6,1,11,"between","在...之間,在兩個之間"],[6,1,12,"birthday","生日"],[6,1,13,"blind","瞎的,盲的"],[6,1,14,"body","身體"],[6,1,15,"bottom","底部,屁股,起因"],
            [6,1,16,"build","建築,建立,升(火)"],[6,1,17,"camp","露營,帳篷,兵營"],[6,1,18,"cell phone","手機"],[6,1,19,"center","中間,中心,市中心"],[6,1,20,"Chinese","中國人,中國話"],
            [6,1,21,"chocolate","巧克力"],[6,1,22,"chopsticks","筷子"],[6,1,23,"clear","清楚的;清晰的"],[6,1,24,"cloudy","多雲的,陰天的,陰鬱的,模糊的"],[6,1,25,"couch","長沙發,長榻"],
            [6,1,26,"cover","遮蓋,覆蓋,報導,遮蓋物"],[6,1,27,"cut","切,割,剪,傷口,長(牙齒)"],[6,1,28,"dangerous","危險的;不安全的"],[6,1,29,"dead","死的,枯萎的,無效的"],[6,1,30,"did","做(do 的過去式)"],
            [6,1,31,"dodge ball","躲避球"],[6,1,32,"drop","落下"],[6,1,33,"east","東邊,東邊的"],[6,1,34,"end","盡頭,結束,結局"],[6,1,35,"enter","進入,參加,輸入"],
            [6,1,36,"excellent","出色的,傑出的,優等的"],[6,1,37,"exercise","運動、練習,操練"],[6,1,38,"expensive","很貴的,高價的"],[6,1,39,"fan","扇子,風扇,吹拂,影(球)迷"],[6,1,40,"favorite","特別喜愛的"],
            [6,1,41,"festival","節日,嘉年華會,慶祝活動"],[6,1,42,"fever","發燒,發熱"],[6,1,43,"finger","手指,指針,彈奏,撥弄"],[6,1,44,"front","前面,正前方,面"],[6,1,45,"goodbye","再見"],
            [6,1,46,"group","群;組;團體"],[6,1,47,"headache","頭痛"],[6,1,48,"healthy","健康的,健壯的,有益的"],[6,1,49,"hike","徒步旅行,遠足"],[6,1,50,"hobby","愛好,嗜好"],
            [6,1,51,"however","無論如何,不管怎樣"],[6,1,52,"inside","在……裡面,內部,慢車道"],[6,1,53,"interested","感興趣的;關心的"],[6,1,54,"interview","面試,訪問,訪談"],[6,1,55,"island","島"],
            [6,1,56,"junior high school","國中"],[6,1,57,"kilogram","公斤,千克"],[6,1,58,"lake","湖泊"],[6,1,59,"language","語言"],[6,1,60,"leader","領導者"],
            [6,1,61,"left","左邊,左轉彎,離開,剩下"],[6,1,62,"lucky","幸運的,碰巧的"],[6,1,63,"make","做:製造;建造"],[6,1,64,"married","已婚的,有配偶的"],[6,1,65,"modern","現代的,時髦的"],
            [6,1,66,"morning","早上,早晨"],[6,1,67,"motorcycle","摩托車,騎摩托車"],[6,1,68,"move","移動,搬家,行動"],[6,1,69,"nature","自然,天性"],[6,1,70,"north","北方,北方的"],
            [6,1,71,"nothing","沒有什麼,無關緊要的,沒有東西"],[6,1,72,"outside","外面的,在外面的"],[6,1,73,"paint","油漆,顏料、塗刷,上色"],[6,1,74,"paper","紙,論文,報告,試卷,用紙包"],[6,1,75,"perhaps","大概,或許,可能"],
            [6,1,76,"phone","電話,聽筒,打電話"],[6,1,77,"piece","一張,一片,一塊"],[6,1,78,"please","請"],[6,1,79,"polite","有禮貌的,客氣的"],[6,1,80,"pound","(重量單位)磅"],
            [6,1,81,"pull","拉,拖,拔"],[6,1,82,"quarter","四等分,四分之一,15分鐘,(上,下)弦月"],[6,1,83,"radio","收音機"],[6,1,84,"rainy","下雨的;多雨的"],[6,1,85,"reduce","減輕,減少,降低"],
            [6,1,86,"reuse","再次使用,重複使用"],[6,1,87,"river","江,河流"],[6,1,88,"said","說,講,發表(過去式)"],[6,1,89,"salesman","推銷員,售貨員"],[6,1,90,"save","挽救,儲蓄,保存"],
            [6,1,91,"sea","海,海洋"],[6,1,92,"senior high school","高中"],[6,1,93,"serious","嚴重的,危急的"],[6,1,94,"several","幾個的,數個的"],[6,1,95,"shoulder","肩膀,路肩,承擔"],
            [6,1,96,"smile","微笑,笑,笑容"],[6,1,97,"social","社會的;社會上的"],[6,1,98,"something","某個人,某件事"],[6,1,99,"somewhere","某地方,某方面,大概"],[6,1,100,"south","南方,南方的"],
            [6,1,101,"spaghetti","義大利麵條,複雜的管線"],[6,1,102,"special","特別的,特殊的"],[6,1,103,"stomach","胃,腹部"],[6,1,104,"straight","筆直的,整齊的,正直的"],[6,1,105,"strange","奇怪的,奇妙的,陌生的"],
            [6,1,106,"successful","成功的"],[6,1,107,"surprise","驚訝,驚喜,意想不到的事"],[6,1,108,"Taiwan","台灣"],[6,1,109,"taxi","計程車"],[6,1,110,"team","隊;組;班"],
            [6,1,111,"television","電視機"],[6,1,112,"thousand","一千的,一千"],[6,1,113,"throat","喉嚨,咽喉"],[6,1,114,"toothache","牙痛"],[6,1,115,"traffic","交通,運載量"],
            [6,1,116,"truck","卡車,載貨汽車,運貨"],[6,1,117,"typhoon","颱風"],[6,1,118,"video","影像,錄影節目"],[6,1,119,"was","是(is 或am 的過去式)"],[6,1,120,"weather","天氣,褪色"],
            [6,1,121,"west","西邊的,西方"],[6,1,122,"whether","是否,不管是……"],[6,1,123,"wise","有智慧的,明智的"],[6,1,124,"wonderful","奇妙的;精彩的"],[6,1,125,"workbook","練習簿"],
            [6,1,126,"sister","姐妹,小姑,嫂子"],[6,1,127,"six","六"],[6,1,128,"some","一些"],[6,1,129,"sorry","抱歉,對不起,感到難過的"],[6,1,130,"stand","站立,站著"],
            [6,1,131,"tea","茶"],[6,1,132,"ten","十"],[6,1,133,"that","那個,那人"],[6,1,134,"this","這,這個"],[6,1,135,"train","火車,訓練"],
            [6,1,136,"two","二;兩個"],[6,1,137,"wall","牆,壁;圍牆;"],[6,1,138,"we","我們"],[6,1,139,"you","你,你們"],[6,1,140,"zero","零,零號,沒有"],

            // 六年級下學期
            [6,2,1,"able","有才能的,能夠"],[6,2,2,"above","在...之上"],[6,2,3,"air","空氣,天空,晾乾"],[6,2,4,"alright","極好的,沒問題的"],[6,2,5,"apartment","公寓,套房"],
            [6,2,6,"arrive","到達,達成,嬰兒出生"],[6,2,7,"away","離開"],[6,2,8,"backache","背痛,腰痛"],[6,2,9,"balcony","陽台,劇院2樓座位"],[6,2,10,"baseball","棒球運動"],
            [6,2,11,"beach","海灘"],[6,2,12,"because","因為"],[6,2,13,"behind","在……的後面,屁股"],[6,2,14,"beside","在旁邊,與…相比"],[6,2,15,"bicycle","腳踏車"],
            [6,2,16,"bitter","苦的,爭吵,寒冷的"],[6,2,17,"boss","老板,上司,浮雕"],[6,2,18,"break","打破,壞掉"],[6,2,19,"businessman","做生意的人,商人,企業家"],[6,2,20,"camera","照相機、攝影機"],
            [6,2,21,"celebrate","慶祝"],[6,2,22,"cent","1分(美元單位)"],[6,2,23,"centimeter","厘米,公分"],[6,2,24,"Christmas","耶誕節"],[6,2,25,"city","都市,市民"],
            [6,2,26,"climb","攀登,爬升,爬山"],[6,2,27,"cook","煮飯,烹飪,廚師,秘密策劃"],[6,2,28,"country","國家,鄉下,鄉村風味的"],[6,2,29,"cross","穿越,叉字,十字形,十字架"],[6,2,30,"daddy","爸爸"],
            [6,2,31,"dictionary","字典,詞典"],[6,2,32,"different","不同的,與眾不同"],[6,2,33,"dig","挖土,挖洞,挖苦"],[6,2,34,"earth","地球,陸地,泥土"],[6,2,35,"elementary school","小學"],
            [6,2,36,"English","英文,英文的"],[6,2,37,"famous","著名的"],[6,2,38,"fence","柵欄,籬笆,障礙物,隔開"],[6,2,39,"finally","最後,終於"],[6,2,40,"friendly","友好的,親切的"],
            [6,2,41,"from","從...起,從……來"],[6,2,42,"giant","巨人,巨物,巨大的,偉人"],[6,2,43,"got","獲得,得到,捉住(get的過去式)"],[6,2,44,"habit","習慣"],[6,2,45,"Halloween","萬聖節"],
            [6,2,46,"hamburger","漢堡"],[6,2,47,"hardworking","認真工作的"],[6,2,48,"hide","把...藏起來,躲藏,隱藏"],[6,2,49,"hill","小山丘,斜坡"],[6,2,50,"hospital","醫院,養育院,修理店"],
            [6,2,51,"housewife","家庭主婦"],[6,2,52,"housework","家事"],[6,2,53,"hundred","一百,數以百計"],[6,2,54,"Internet","網路"],[6,2,55,"jog","慢跑,輕碰"],
            [6,2,56,"just","正要,剛要"],[6,2,57,"kind","親切的,好心的,種類"],[6,2,58,"land","降落,登陸,陸地,土地"],[6,2,59,"leave","離開,丟棄,剩餘"],[6,2,60,"light","輕的,輕快的,光亮,照亮,點燃"],
            [6,2,61,"living room","客廳"],[6,2,62,"mail","郵件"],[6,2,63,"map","地圖,精心規劃"],[6,2,64,"mile","英里"],[6,2,65,"monster","怪物,妖怪,巨人,巨大的"],
            [6,2,66,"morning","早上,早晨"],[6,2,67,"mountain","高山,大量"],[6,2,68,"national","國家的,國立的,國民"],[6,2,69,"newspaper","報紙,報社"],[6,2,70,"notebook","筆記本電腦,筆記本"],
            [6,2,71,"number","數字,編號,許多人"],[6,2,72,"package","包裝好的1包,1袋"],[6,2,73,"pass","通過,傳遞,傳球,及格"],[6,2,74,"piano","鋼琴"],[6,2,75,"pineapple","鳳梨"],
            [6,2,76,"plane","飛機,平面,水平,平坦的"],[6,2,77,"plastic","塑膠的,可塑的,塑膠品,信用卡"],[6,2,78,"pleasure","快樂,愉快,榮幸"],[6,2,79,"point","指向,指出,觀點,得分,重點"],[6,2,80,"postcard","明信片"],
            [6,2,81,"principal","校長,主角,主要的"],[6,2,82,"queen","王后"],[6,2,83,"railway","鐵路,鐵道"],[6,2,84,"reduce","減輕,減少,降低"],[6,2,85,"refrigerator","冰箱"],
            [6,2,86,"remember","記得,記住,紀念"],[6,2,87,"right","右邊,馬上,正確的,正好"],[6,2,88,"road","馬路,途徑"],[6,2,89,"roller skate","輪式溜冰鞋"],[6,2,90,"salty","有鹽分的;鹹味濃的"],
            [6,2,91,"science","自然科學"],[6,2,92,"secretary","私人祕書,大官"],[6,2,93,"sentence","句子,判決,宣判"],[6,2,94,"shopkeeper","老板,店主,商店經理"],[6,2,95,"side","旁邊;邊;'面"],
            [6,2,96,"smoke","煙霧,冒霧氣,抽煙"],[6,2,97,"sofa","沙發"],[6,2,98,"sore","痠痛的;"],[6,2,99,"space","空間,太空,距離"],[6,2,100,"sports","運動"],
            [6,2,101,"stomachache","胃痛;腹痛"],[6,2,102,"subject","科目,學科,主題"],[6,2,103,"sunny","有陽光的,歡樂的"],[6,2,104,"surprised","感到驚訝的,驚喜的"],[6,2,105,"tangerine","橘子,橘紅色"],
            [6,2,106,"teach","教導,訓練"],[6,2,107,"telephone","電話機,打電話"],[6,2,108,"tennis","網球運動"],[6,2,109,"tooth","牙齒"],[6,2,110,"town","城鎮,商業區"],
            [6,2,111,"trash","垃圾"],[6,2,112,"Tuesday","星期二"],[6,2,113,"turn","翻轉,轉變,使轉動"],[6,2,114,"unhappy","不快樂的"],[6,2,115,"uniform","制服"],
            [6,2,116,"vacation","度假,休假,假日"],[6,2,117,"waitress","女服務生"],[6,2,118,"warm","溫暖的,使暖和,變暖和"],[6,2,119,"wash","沖洗,沖走"],[6,2,120,"watermelon","西瓜"],
            [6,2,121,"welcome","歡迎(光臨),受歡迎的"],[6,2,122,"were","是(are 的過去式)"],[6,2,123,"windy","有風的,風大的"],[6,2,124,"work","工作,勞動,成果"],[6,2,125,"writer","作者,作家,記者"],
            [6,2,126,"sing","唱歌"],[6,2,127,"sit","坐,坐著"],[6,2,128,"small","小的"],[6,2,129,"song","歌曲,歌謠"],[6,2,130,"speak","說話,演說"],
            [6,2,131,"swing","盪鞦韆,搖擺,搖擺地走"],[6,2,132,"teacher","老師"],[6,2,133,"thank","感謝"],[6,2,134,"there","在那裡"],[6,2,135,"three","3"],
            [6,2,136,"turtle","海龜,龜"],[6,2,137,"walk","步行;散步"],[6,2,138,"water","水,水面,澆水"],[6,2,139,"window","窗,窗戶"],[6,2,140,"your","你的,你們的"]
        ];

        const processData = (rawData) => {
            return rawData.map((item, index) => {
                if (Array.isArray(item)) {
                    return {
                        id: `${item[0]}-${item[1]}-${item[2] || index}`,
                        grade: item[0],
                        semester: item[1],
                        word: item[3],
                        meaning: item[4],
                        sentence: item[5] || null,
                        image: null,
                        category: `${item[0]}年級 ${item[1] === 1 ? '上' : '下'}學期`,
                        sortKey: item[0] * 1000 + item[1] * 100 + (item[2] || index)
                    };
                } else {
                    let cat = item.category;
                    if (!cat && item.grade && item.semester) {
                        cat = `${item.grade}年級 ${parseInt(item.semester) === 1 ? '上' : '下'}學期`;
                    }
                    if (!cat) cat = "未分類";

                    return {
                        id: item.id || `json-${index}-${Date.now()}`,
                        grade: item.grade,
                        semester: item.semester,
                        word: item.word || "",
                        meaning: item.meaning || "",
                        sentence: item.sentence || null,
                        image: item.image || null,
                        category: cat,
                        sortKey: item.sortKey || index
                    };
                }
            });
        };

        const SRS_INTERVALS = [0, 1, 3, 7, 14, 30, 60]; 

        // ==========================================
        // 2. 主程式
        // ==========================================
        function App() {
            const [currentMode, setCurrentMode] = useState('home'); 
            const [hasActivePlan, setHasActivePlan] = useState(false);
            const [db, setDb] = useState([]);

            useEffect(() => {
                const importedData = localStorage.getItem('vocab_imported_data');
                // 簡單檢查是否有資料，若無資料則初始化
                const raw = importedData ? JSON.parse(importedData) : processData(DEFAULT_RAW_DATA);
                setDb(raw);

                const savedPlan = localStorage.getItem('smart_plan_config');
                setHasActivePlan(!!savedPlan);
            }, []);

            const handleImport = (jsonData) => {
                try {
                    const newItems = processData(jsonData);
                    const isAppend = confirm("匯入選項：\n\n[確定] = 保留舊資料並追加 (Append)\n[取消] = 清除舊資料並覆蓋 (Overwrite)");
                    let finalDb;
                    if (isAppend) {
                        const existingIds = new Set(db.map(d => d.id));
                        const filteredNew = newItems.filter(d => !existingIds.has(d.id));
                        finalDb = [...db, ...filteredNew];
                    } else {
                        finalDb = newItems;
                    }
                    setDb(finalDb);
                    localStorage.setItem('vocab_imported_data', JSON.stringify(finalDb));
                    localStorage.removeItem('smart_plan_config');
                    setHasActivePlan(false);
                    alert(`匯入成功！共 ${finalDb.length} 個單字。`);
                } catch (e) {
                    alert("匯入失敗，請確認 JSON 格式。");
                }
            };

            const handleResetData = () => {
                if(confirm("確定恢復原廠設定？自定義匯入將被清除。")) {
                    localStorage.removeItem('vocab_imported_data');
                    setDb(processData(DEFAULT_RAW_DATA));
                    localStorage.removeItem('smart_plan_config');
                    setHasActivePlan(false);
                    alert("已恢復預設值。");
                }
            };

            const renderContent = () => {
                switch(currentMode) {
                    case 'explore':
                        return <ExplorationMode db={db} onBack={() => setCurrentMode('home')} />;
                    case 'smart_dashboard':
                        return <SmartLearningMode db={db} onBack={() => setCurrentMode('home')} onReset={() => setHasActivePlan(false)} />;
                    case 'smart_setup':
                        return <SmartPlanSetup db={db} onBack={() => setCurrentMode('home')} onCreated={() => { setHasActivePlan(true); setCurrentMode('smart_dashboard'); }} />;
                    default:
                        return <HomePage 
                            onSelectExplore={() => setCurrentMode('explore')}
                            onSelectSmart={() => setCurrentMode(hasActivePlan ? 'smart_dashboard' : 'smart_setup')}
                            hasActivePlan={hasActivePlan}
                            onImport={handleImport}
                            onResetData={handleResetData}
                        />;
                }
            };

            return (
                <div className="min-h-screen text-slate-800">
                    {renderContent()}
                </div>
            );
        }

        // ==========================================
        // 3. 首頁 (放大版)
        // ==========================================
        function HomePage({ onSelectExplore, onSelectSmart, hasActivePlan, onImport, onResetData }) {
            const fileInputRef = useRef(null);

            const onFileChange = (e) => {
                /* ... (保留原本邏輯) ... */
                const file = e.target.files[0];
                if (!file) return;
                const reader = new FileReader();
                reader.onload = (event) => {
                    try {
                        const json = JSON.parse(event.target.result);
                        onImport(json);
                    } catch (err) {
                        alert("檔案格式錯誤");
                    }
                };
                reader.readAsText(file);
            };

            return (
                <div className="p-6 flex flex-col items-center justify-center min-h-screen relative max-w-7xl mx-auto">
                    <div className="absolute top-6 right-6 flex gap-3">
                        <button onClick={() => fileInputRef.current.click()} className="text-base bg-white/60 px-6 py-3 rounded-2xl shadow-sm text-slate-500 hover:text-indigo-600 font-bold transition-colors btn-bounce">
                            <i className="fa-solid fa-file-import mr-2"></i>匯入
                        </button>
                        <button onClick={onResetData} className="text-base bg-white/60 px-6 py-3 rounded-2xl shadow-sm text-slate-500 hover:text-red-500 font-bold transition-colors btn-bounce">
                            <i className="fa-solid fa-rotate-left mr-2"></i>重置
                        </button>
                        <input type="file" ref={fileInputRef} onChange={onFileChange} accept=".json" className="hidden" />
                    </div>

                    <div className="text-center mb-16">
                        <h1 className="text-6xl md:text-8xl font-bold mb-6 text-sky-600 tracking-tight drop-shadow-sm leading-tight">
                            國小英語<br/><span className="text-5xl md:text-7xl text-sky-400">全方位學習系統</span>
                        </h1>
                        <p className="text-slate-500 text-2xl md:text-3xl font-medium">讓學習變得像玩遊戲一樣有趣！</p>
                    </div>

                    <div className="grid grid-cols-1 md:grid-cols-2 gap-10 w-full max-w-5xl">
                        <button onClick={onSelectExplore} className="btn-bounce glass-panel p-10 md:p-14 rounded-[3rem] hover:shadow-2xl transition-all flex flex-col items-center text-center gap-6 group border-t-[12px] border-sky-400 h-full">
                            <div className="w-32 h-32 md:w-40 md:h-40 bg-sky-100 rounded-full flex items-center justify-center text-6xl md:text-7xl text-sky-500 group-hover:scale-110 transition-transform shadow-inner">
                                <i className="fa-solid fa-compass"></i>
                            </div>
                            <div>
                                <h3 className="text-3xl md:text-4xl font-bold text-slate-700 mb-3">自由探索模式</h3>
                                <p className="text-lg md:text-xl text-slate-500">自選年級與類別，<br/>列表、卡片、測驗隨你選</p>
                            </div>
                        </button>

                        <button onClick={onSelectSmart} className="btn-bounce glass-panel p-10 md:p-14 rounded-[3rem] hover:shadow-2xl transition-all flex flex-col items-center text-center gap-6 group border-t-[12px] border-indigo-400 h-full">
                            <div className="w-32 h-32 md:w-40 md:h-40 bg-indigo-100 rounded-full flex items-center justify-center text-6xl md:text-7xl text-indigo-500 group-hover:scale-110 transition-transform shadow-inner">
                                <i className="fa-solid fa-brain"></i>
                            </div>
                            <div>
                                <h3 className="text-3xl md:text-4xl font-bold text-slate-700 mb-3">智能衝刺計畫</h3>
                                <p className="text-lg md:text-xl text-slate-500">艾賓豪斯記憶曲線排程，<br/>科學化背單字</p>
                                {hasActivePlan ? (
                                    <span className="inline-block mt-4 text-base bg-emerald-100 text-emerald-700 px-4 py-2 rounded-full font-bold animate-pulse">
                                        <i className="fa-solid fa-play mr-2"></i> 學習進行中
                                    </span>
                                ) : (
                                    <span className="inline-block mt-4 text-base bg-slate-100 text-slate-500 px-4 py-2 rounded-full font-bold">建立新計畫</span>
                                )}
                            </div>
                        </button>
                    </div>
                </div>
            );
        }
// ==========================================
        // ==========================================
        // 4. 模式 A: 自由探索 (全視窗放大版)
        // ==========================================
        function ExplorationMode({ db, onBack }) {
            /* ... (保留原本 hooks 邏輯) ... */
            const categories = useMemo(() => [...new Set(db.map(i => i.category))], [db]);
            const [selectedCategory, setSelectedCategory] = useState(categories[0] || "");
            const [mode, setMode] = useState('list');
            const [filteredData, setFilteredData] = useState([]);

            useEffect(() => {
                if (categories.length > 0 && !categories.includes(selectedCategory)) {
                    setSelectedCategory(categories[0]);
                }
            }, [categories]);

            useEffect(() => {
                const data = db.filter(item => item.category === selectedCategory);
                setFilteredData(data);
            }, [selectedCategory, db]);

            const speak = (text) => {
                const u = new SpeechSynthesisUtterance(text);
                u.lang = 'en-US'; u.rate = 0.8;
                window.speechSynthesis.speak(u);
            };

            return (
                <div className="min-h-screen p-4 md:p-8 max-w-[1800px] mx-auto flex flex-col md:flex-row gap-8 items-start">
                    
                    {/* 左側選單：加寬至 w-96 */}
                    <div className="w-full md:w-96 shrink-0 md:sticky md:top-8 z-10">
                        <div className="glass-panel p-6 md:p-8 rounded-[2.5rem] soft-shadow flex flex-col gap-6">
                            <div className="flex items-center gap-4 mb-2">
                                <button onClick={onBack} className="w-12 h-12 flex items-center justify-center rounded-full bg-white hover:bg-slate-100 shadow-sm text-slate-500 transition-colors text-xl">
                                    <i className="fa-solid fa-arrow-left"></i>
                                </button>
                                <h2 className="font-bold text-2xl md:text-3xl text-slate-700">自由探索</h2>
                            </div>

                            <div>
                                <label className="text-sm font-bold text-slate-400 uppercase tracking-wider ml-1 mb-3 block">類別</label>
                                <div className="relative w-full">
                                    <select 
                                        value={selectedCategory} 
                                        onChange={e => setSelectedCategory(e.target.value)} 
                                        className="w-full appearance-none bg-sky-50 border-2 border-sky-100 text-sky-700 rounded-2xl px-6 py-4 pr-12 font-bold focus:outline-none focus:ring-2 focus:ring-sky-200 cursor-pointer text-xl transition-all"
                                    >
                                        {categories.map(c => <option key={c} value={c}>{c}</option>)}
                                    </select>
                                    <i className="fa-solid fa-chevron-down absolute right-6 top-1/2 -translate-y-1/2 text-sky-400 pointer-events-none text-xl"></i>
                                </div>
                            </div>

                            <div>
                                <label className="text-sm font-bold text-slate-400 uppercase tracking-wider ml-1 mb-3 block">模式</label>
                                <div className="grid grid-cols-3 md:grid-cols-1 gap-3">
                                    {[
                                        {id: 'list', icon: 'fa-list', label: '列表'},
                                        {id: 'flashcard', icon: 'fa-layer-group', label: '卡片'},
                                        {id: 'quiz', icon: 'fa-graduation-cap', label: '測驗'}
                                    ].map(m => (
                                        <button key={m.id} onClick={() => setMode(m.id)} 
                                            className={`py-4 px-3 rounded-2xl font-bold transition-all flex flex-col md:flex-row items-center md:gap-5 justify-center md:justify-start ${mode === m.id ? 'bg-sky-500 text-white shadow-lg shadow-sky-200' : 'bg-white text-slate-500 hover:bg-slate-50'}`}>
                                            <i className={`fa-solid ${m.icon} md:w-8 text-center text-xl md:text-2xl mb-1 md:mb-0`}></i>
                                            <span className="text-sm md:text-xl">{m.label}</span>
                                        </button>
                                    ))}
                                </div>
                            </div>

                            <div className="text-center text-sm md:text-base text-slate-400 font-bold bg-slate-100 rounded-full py-3 mt-2">
                                共 {filteredData.length} 字
                            </div>
                        </div>
                    </div>

                    {/* 右側內容區 */}
                    <div className="flex-1 w-full min-w-0">
                        {filteredData.length === 0 ? (
                            <div className="h-[60vh] flex flex-col items-center justify-center text-slate-400">
                                <div className="text-7xl mb-6 opacity-50">📂</div>
                                <p className="text-2xl font-bold">此類別無資料</p>
                            </div>
                        ) : (
                            <div className="animate-fade-in w-full">
                                {mode === 'list' && <ListView data={filteredData} speak={speak} />}
                                {mode !== 'list' && (
                                    <div className="flex flex-col items-center justify-start md:pt-12 pb-12 min-h-[60vh]">
                                        {mode === 'flashcard' && <FlashcardSession data={filteredData} speak={speak} />}
                                        {mode === 'quiz' && <QuizSession data={filteredData} speak={speak} />}
                                    </div>
                                )}
                            </div>
                        )}
                    </div>
                </div>
            );
        }
// --- 列表視圖 (放大版) ---
        function ListView({ data, speak }) {
            return (
                <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-2 xl:grid-cols-3 gap-6 pb-12">
                    {data.map((item, idx) => (
                        <div key={idx} className="glass-panel p-8 rounded-[2rem] flex items-center justify-between hover:bg-white transition-colors group border-l-[12px] border-l-transparent hover:border-l-sky-400 shadow-sm hover:shadow-xl">
                            <div className="min-w-0 flex-1 pr-6">
                                <div className="text-4xl md:text-5xl font-bold text-sky-600 english-font mb-3 truncate">{item.word}</div>
                                <div className="text-2xl md:text-3xl text-slate-600 font-medium truncate mb-2">{item.meaning}</div>
                                {item.sentence && (
                                    <div className="text-slate-400 text-lg md:text-xl mt-2 line-clamp-2 italic">
                                        "{item.sentence}"
                                    </div>
                                )}
                            </div>
                            <button onClick={() => speak(item.word)} className="w-16 h-16 rounded-full bg-sky-50 text-sky-500 flex items-center justify-center shrink-0 hover:bg-sky-500 hover:text-white transition-all btn-bounce shadow-md">
                                <i className="fa-solid fa-volume-high text-2xl"></i>
                            </button>
                        </div>
                    ))}
                </div>
            );
        }

        // --- 卡片視圖 (放大版) ---
        function FlashcardSession({ data, speak }) {
            const [idx, setIdx] = useState(0);
            const [flipped, setFlipped] = useState(false);
            const item = data[idx];

            return (
                <div className="w-full max-w-2xl mx-auto">
                    <div className={`relative w-full aspect-[3/4] md:aspect-[4/3] cursor-pointer card-perspective ${flipped ? 'flipped' : ''}`} onClick={() => setFlipped(!flipped)}>
                        <div className="card-inner card-shadow rounded-[3rem] bg-white">
                            {/* 正面 */}
                            <div className="card-front flex flex-col items-center justify-center p-10 border border-white bg-gradient-to-br from-white to-sky-50">
                                <div className="absolute top-8 left-8 px-4 py-2 bg-sky-100 text-sky-600 rounded-xl text-lg font-bold">
                                    {idx + 1} / {data.length}
                                </div>
                                <h2 className="text-6xl md:text-8xl font-bold text-slate-800 english-font mb-8 text-center break-words w-full px-4">
                                    {item.word}
                                </h2>
                                <button onClick={(e)=>{e.stopPropagation();speak(item.word)}} className="w-24 h-24 bg-white rounded-full text-sky-500 flex items-center justify-center shadow-xl hover:scale-110 transition-transform mb-10 border border-sky-50">
                                    <i className="fa-solid fa-volume-high text-4xl"></i>
                                </button>
                                <p className="absolute bottom-8 text-slate-400 text-sm font-bold uppercase animate-pulse tracking-widest">Tap to Flip</p>
                            </div>
                            
                            {/* 背面 */}
                            <div className="card-back flex flex-col items-center justify-center p-10 border border-white text-center bg-gradient-to-br from-white to-emerald-50">
                                {item.image && (
                                    <img src={`./images/${item.image}`} alt="" className="h-32 mb-6 object-contain" onError={(e) => {e.target.style.display='none'}} />
                                )}
                                <h3 className="text-5xl md:text-6xl font-bold text-slate-700 mb-8">{item.meaning}</h3>
                                {item.sentence ? (
                                    <div className="w-full p-6 bg-white/80 rounded-3xl border border-emerald-100 text-slate-600 italic shadow-sm text-xl md:text-2xl leading-relaxed">
                                        <i className="fa-solid fa-quote-left text-emerald-200 mr-3 text-lg"></i>
                                        {item.sentence}
                                    </div>
                                ) : <div className="w-16 h-2 bg-emerald-100 rounded-full"></div>}
                            </div>
                        </div>
                    </div>
                    
                    {/* 控制按鈕 */}
                    <div className="flex items-center justify-center gap-12 mt-12">
                        <button onClick={()=>{setFlipped(false); setIdx(prev=>(prev-1+data.length)%data.length)}} className="w-20 h-20 rounded-full bg-white text-slate-400 hover:text-sky-600 hover:bg-sky-50 shadow-lg flex items-center justify-center transition-all btn-bounce text-3xl">
                            <i className="fa-solid fa-arrow-left"></i>
                        </button>
                        <button onClick={()=>{setFlipped(false); setIdx(prev=>(prev+1)%data.length)}} className="w-20 h-20 rounded-full bg-white text-slate-400 hover:text-sky-600 hover:bg-sky-50 shadow-lg flex items-center justify-center transition-all btn-bounce text-3xl">
                            <i className="fa-solid fa-arrow-right"></i>
                        </button>
                    </div>
                </div>
            );
        }

        function QuizSession({ data, speak }) {
            const [qIdx, setQIdx] = useState(0);
            const [score, setScore] = useState(0);
            const [showResult, setShowResult] = useState(false);
            const [options, setOptions] = useState([]);
            const [feedback, setFeedback] = useState(null); 
            
            useEffect(() => {
                if(data.length > 0) generateOptions();
            }, [qIdx]);

            const generateOptions = () => {
                const correct = data[qIdx];
                const others = data.filter(d => d.id !== correct.id).sort(()=>0.5-Math.random()).slice(0,3);
                setOptions([...others, correct].sort(()=>0.5-Math.random()));
            };

            const handleAnswer = (word) => {
                if (feedback) return;
                const isCorrect = word === data[qIdx].word;
                setFeedback(isCorrect ? 'correct' : 'wrong');
                if(isCorrect) {
                    setScore(s=>s+1);
                    speak("Correct");
                    confetti({ particleCount: 30, spread: 50, origin: { y: 0.8 } });
                } else {
                    speak("Try again");
                }
                setTimeout(() => {
                    setFeedback(null);
                    if(qIdx < data.length - 1) setQIdx(q=>q+1);
                    else setShowResult(true);
                }, 1000);
            };

            if(showResult) return (
                <div className="glass-panel p-16 rounded-[3rem] text-center soft-shadow w-full max-w-2xl mx-auto">
                    <div className="text-8xl mb-8">🏆</div>
                    <h2 className="text-4xl font-bold text-slate-800 mb-4">測驗完成</h2>
                    <p className="text-2xl text-slate-500 mb-10">得分: <span className="text-sky-600 font-bold text-5xl mx-3">{score}</span> / {data.length}</p>
                    <button onClick={()=>{setQIdx(0);setScore(0);setShowResult(false)}} className="px-10 py-4 bg-sky-500 text-white rounded-2xl font-bold text-xl hover:bg-sky-600 transition-colors shadow-lg btn-bounce">
                        再玩一次
                    </button>
                </div>
            );

            return (
                <div className="w-full max-w-3xl mx-auto">
                    <div className="glass-panel p-10 md:p-16 rounded-[3rem] shadow-xl mb-8 text-center relative overflow-hidden min-h-[300px] flex flex-col items-center justify-center bg-white/90">
                        {feedback && (
                            <div className={`absolute inset-0 flex items-center justify-center z-20 backdrop-blur-sm ${feedback === 'correct' ? 'bg-emerald-100/80' : 'bg-rose-100/80'}`}>
                                <i className={`fa-solid ${feedback === 'correct' ? 'fa-check text-emerald-500' : 'fa-xmark text-rose-500'} text-8xl animate-bounce`}></i>
                            </div>
                        )}
                        <h2 className="text-5xl md:text-6xl font-bold text-slate-700 mb-6 leading-tight">{data[qIdx].meaning}</h2>
                        <div className="absolute top-6 right-6 text-sm md:text-base font-bold bg-slate-100 text-slate-400 px-3 py-1 rounded-lg">Q: {qIdx+1}/{data.length}</div>
                    </div>

                    <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
                        {options.map((opt, i) => (
                            <button key={i} onClick={()=>handleAnswer(opt.word)} className="btn-bounce p-8 bg-white border-2 border-slate-50 rounded-[2rem] hover:border-sky-300 hover:bg-sky-50 font-bold text-2xl md:text-3xl text-slate-600 english-font shadow-sm transition-all text-center">
                                {opt.word}
                            </button>
                        ))}
                    </div>
                </div>
            );
        }

        // ==========================================
        // 5. 智能衝刺計畫設定 (放大優化版)
        // ==========================================
        function SmartPlanSetup({ db, onBack, onCreated }) {
            const categories = useMemo(() => [...new Set(db.map(i => i.category))], [db]);
            const [startCatIdx, setStartCatIdx] = useState(0);
            const [endCatIdx, setEndCatIdx] = useState(Math.min(categories.length - 1, 1));
            const [days, setDays] = useState(14);
            const [previewCount, setPreviewCount] = useState(0);

            useEffect(() => {
                const s = Math.min(startCatIdx, endCatIdx);
                const e = Math.max(startCatIdx, endCatIdx);
                const selectedCats = categories.slice(s, e + 1);
                const count = db.filter(item => selectedCats.includes(item.category)).length;
                setPreviewCount(count);
            }, [startCatIdx, endCatIdx, db, categories]);

            const handleCreate = () => {
                if (previewCount === 0) return alert("範圍內無單字");
                const s = Math.min(startCatIdx, endCatIdx);
                const e = Math.max(startCatIdx, endCatIdx);
                const config = {
                    targetCats: categories.slice(s, e + 1), 
                    targetDays: parseInt(days),
                    dailyGoal: Math.ceil(previewCount / days),
                    totalWords: previewCount,
                    createdAt: Date.now()
                };
                localStorage.setItem('smart_plan_config', JSON.stringify(config));
                localStorage.setItem('vocab_progress', JSON.stringify({})); 
                onCreated();
            };

            return (
                <div className="min-h-screen flex items-center justify-center p-6">
                    <div className="glass-panel max-w-2xl w-full p-10 md:p-14 rounded-[3rem] relative">
                        <button onClick={onBack} className="absolute top-10 left-10 w-12 h-12 flex items-center justify-center rounded-full bg-white hover:bg-slate-100 text-slate-400 transition-colors shadow-sm">
                            <i className="fa-solid fa-arrow-left text-2xl"></i>
                        </button>
                        <h2 className="text-4xl md:text-5xl font-bold text-slate-800 mb-10 text-center mt-4">建立新計畫</h2>
                        
                        <div className="space-y-10">
                            <div>
                                <label className="block text-sm font-bold text-indigo-400 mb-4 uppercase tracking-widest">學習範圍</label>
                                <div className="flex flex-col gap-4">
                                    <div className="flex items-center gap-4 bg-white p-5 rounded-2xl border-2 border-slate-100 focus-within:border-indigo-300 transition-colors shadow-sm">
                                        <span className="text-slate-400 text-lg font-bold w-8 text-center">從</span>
                                        <select value={startCatIdx} onChange={e=>setStartCatIdx(parseInt(e.target.value))} className="bg-transparent font-bold text-slate-700 flex-1 outline-none text-xl md:text-2xl cursor-pointer appearance-none">
                                            {categories.map((c, i)=><option key={c} value={i}>{c}</option>)}
                                        </select>
                                        <i className="fa-solid fa-chevron-down text-slate-300"></i>
                                    </div>
                                    <div className="flex items-center gap-4 bg-white p-5 rounded-2xl border-2 border-slate-100 focus-within:border-indigo-300 transition-colors shadow-sm">
                                        <span className="text-slate-400 text-lg font-bold w-8 text-center">到</span>
                                        <select value={endCatIdx} onChange={e=>setEndCatIdx(parseInt(e.target.value))} className="bg-transparent font-bold text-slate-700 flex-1 outline-none text-xl md:text-2xl cursor-pointer appearance-none">
                                            {categories.map((c, i)=><option key={c} value={i}>{c}</option>)}
                                        </select>
                                        <i className="fa-solid fa-chevron-down text-slate-300"></i>
                                    </div>
                                </div>
                                <div className="text-right mt-3 text-sm text-slate-400 font-bold">目前選擇範圍共 {previewCount} 字</div>
                            </div>

                            <div>
                                <label className="block text-sm font-bold text-indigo-400 mb-4 uppercase tracking-widest">目標天數: <span className="text-indigo-600 text-3xl ml-2 number-font">{days}</span> 天</label>
                                <input type="range" min="3" max="60" value={days} onChange={e => setDays(e.target.value)} className="w-full h-4 bg-slate-200 rounded-full appearance-none cursor-pointer accent-indigo-500 hover:accent-indigo-400 transition-all"/>
                            </div>

                            <div className="pt-8 border-t-2 border-slate-100 flex justify-between items-end">
                                <span className="font-bold text-slate-500 text-lg">每日任務量</span>
                                <span className="text-5xl font-bold text-indigo-600 number-font">{Math.ceil(previewCount / days)} <span className="text-xl text-slate-400 ml-1">字 / 天</span></span>
                            </div>

                            <button onClick={handleCreate} className="btn-bounce w-full py-6 bg-indigo-500 text-white rounded-[2rem] font-bold text-2xl shadow-xl shadow-indigo-200 hover:bg-indigo-600 transition-colors">
                                開始衝刺 🚀
                            </button>
                        </div>
                    </div>
                </div>
            );
        }

        // ==========================================
        // 6. 智能學習儀表板 (放大優化版)
        // ==========================================
        function SmartLearningMode({ db, onBack, onReset }) {
            const [config, setConfig] = useState(null);
            const [progress, setProgress] = useState({});
            const [sessionMode, setSessionMode] = useState(null); 

            useEffect(() => {
                setConfig(JSON.parse(localStorage.getItem('smart_plan_config')));
                setProgress(JSON.parse(localStorage.getItem('vocab_progress') || '{}'));
            }, [sessionMode]); 

            const activeDB = useMemo(() => {
                if (!config || !config.targetCats) return [];
                return db.filter(item => config.targetCats.includes(item.category));
            }, [config, db]);

            const handleSaveProgress = (wordId, isCorrect) => {
                const now = Date.now();
                const currentData = progress[wordId] || { level: 0, reviews: 0 };
                let newLvl = isCorrect ? Math.min(currentData.level + 1, SRS_INTERVALS.length - 1) : 0;
                
                const newProgress = {
                    ...progress,
                    [wordId]: {
                        level: newLvl,
                        nextReview: now + (SRS_INTERVALS[newLvl] * 86400000),
                        lastReview: now,
                        reviews: currentData.reviews + 1
                    }
                };
                setProgress(newProgress);
                localStorage.setItem('vocab_progress', JSON.stringify(newProgress));
            };

            if (sessionMode) {
                return <SmartSession 
                    mode={sessionMode} 
                    db={activeDB} 
                    progress={progress} 
                    config={config}
                    onResult={handleSaveProgress}
                    onExit={() => setSessionMode(null)} 
                />;
            }

            if (!config) return null;

            const learnedCount = Object.keys(progress).length;
            const percentage = Math.round((learnedCount / config.totalWords) * 100) || 0;
            const now = Date.now();
            const toReview = activeDB.filter(w => progress[w.id] && progress[w.id].nextReview <= now);
            
            // SVG 參數放大
            const radius = 120;
            const stroke = 24;
            const normalizedRadius = radius - stroke * 2;
            const circumference = normalizedRadius * 2 * Math.PI;
            const strokeDashoffset = circumference - (percentage / 100) * circumference;

            return (
                <div className="min-h-screen p-6 max-w-6xl mx-auto flex flex-col justify-center">
                    <div className="glass-panel p-10 md:p-16 rounded-[3.5rem] relative">
                        <div className="absolute top-10 left-10 flex gap-4">
                            <button onClick={onBack} className="w-12 h-12 flex items-center justify-center rounded-full bg-white hover:bg-slate-100 text-slate-400 hover:text-slate-600 transition-colors shadow-sm"><i className="fa-solid fa-arrow-left text-2xl"></i></button>
                        </div>
                        <div className="absolute top-10 right-10">
                             <button onClick={()=>{if(confirm('確定刪除計畫？')) {onReset();onBack();}}} className="w-12 h-12 flex items-center justify-center rounded-full bg-red-50 text-red-300 hover:bg-red-100 hover:text-red-500 transition-colors"><i className="fa-solid fa-trash-can text-xl"></i></button>
                        </div>

                        <div className="flex flex-col md:flex-row items-center justify-between gap-16 mb-12 mt-8">
                            {/* 巨型進度環 */}
                            <div className="relative w-72 h-72 md:w-80 md:h-80 shrink-0">
                                <svg height={radius * 2 + 40} width={radius * 2 + 40} className="transform -rotate-90 drop-shadow-xl overflow-visible w-full h-full">
                                    <circle stroke="#f1f5f9" strokeWidth={stroke} fill="transparent" r={normalizedRadius} cx="50%" cy="50%" />
                                    <circle 
                                        stroke="#8b5cf6" 
                                        strokeWidth={stroke} 
                                        strokeDasharray={circumference + ' ' + circumference} 
                                        style={{ strokeDashoffset, transition: 'stroke-dashoffset 1s ease-in-out' }}
                                        strokeLinecap="round" 
                                        fill="transparent" 
                                        r={normalizedRadius} 
                                        cx="50%" 
                                        cy="50%" 
                                    />
                                </svg>
                                <div className="absolute inset-0 flex flex-col items-center justify-center">
                                    <span className="text-6xl md:text-7xl font-bold text-violet-600 number-font">{percentage}%</span>
                                    <span className="text-lg font-bold text-slate-400 uppercase tracking-widest mt-2">總進度</span>
                                </div>
                            </div>

                            {/* 數據與按鈕 */}
                            <div className="flex-1 w-full grid grid-cols-2 gap-6 text-center">
                                <div className="bg-white/60 p-6 rounded-[2rem] border border-slate-100">
                                    <div className="text-4xl md:text-5xl font-bold text-slate-700 mb-2">{learnedCount}</div>
                                    <div className="text-sm md:text-base text-slate-400 font-bold uppercase">已學單字</div>
                                </div>
                                <div className="bg-white/60 p-6 rounded-[2rem] border border-slate-100">
                                    <div className="text-4xl md:text-5xl font-bold text-slate-700 mb-2">{config.totalWords - learnedCount}</div>
                                    <div className="text-sm md:text-base text-slate-400 font-bold uppercase">剩餘單字</div>
                                </div>
                                
                                <button onClick={() => setSessionMode('learn')} className="col-span-2 btn-bounce py-6 bg-violet-500 text-white rounded-[2rem] font-bold text-2xl shadow-xl shadow-violet-200 flex items-center justify-center gap-3 hover:bg-violet-600 transition-colors">
                                    <i className="fa-solid fa-rocket animate-pulse"></i> 
                                    <span>今日新進度 <span className="text-violet-200 text-lg">({config.dailyGoal}字)</span></span>
                                </button>
                                
                                <button onClick={() => setSessionMode('review')} disabled={toReview.length===0} className={`col-span-2 btn-bounce py-6 rounded-[2rem] font-bold text-2xl border-4 flex items-center justify-center gap-3 transition-all ${toReview.length>0 ? 'bg-amber-50 border-amber-200 text-amber-600 hover:bg-amber-100' : 'bg-slate-50 border-slate-100 text-slate-300 cursor-not-allowed'}`}>
                                    <i className={`fa-solid fa-rotate-right ${toReview.length>0?'animate-spin-slow':''}`}></i> 
                                    <span>複習舊單字 <span className={`${toReview.length>0?'text-amber-500':'text-slate-300'} text-lg`}>({toReview.length}字)</span></span>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            );
        }

        // ==========================================
        // 7. 智能學習 Session (巨型卡片優化版)
        // ==========================================
        function SmartSession({ mode, db, progress, config, onResult, onExit }) {
            const [list, setList] = useState([]);
            const [idx, setIdx] = useState(0);
            const [flipped, setFlipped] = useState(false);
            const [finished, setFinished] = useState(false);

            useEffect(() => {
                if (mode === 'learn') {
                    const newWords = db.filter(w => !progress[w.id]).slice(0, config.dailyGoal);
                    setList(newWords);
                } else {
                    const now = Date.now();
                    const reviewWords = db.filter(w => progress[w.id] && progress[w.id].nextReview <= now);
                    setList(reviewWords);
                }
            }, [mode]);

            const handleNext = (correct) => {
                onResult(list[idx].id, correct);
                if (correct) confetti({ particleCount: 40, spread: 60, origin: { y: 0.7 }, colors: ['#a78bfa', '#34d399'] });
                if (idx < list.length - 1) {
                    setFlipped(false);
                    setTimeout(() => setIdx(idx + 1), 250);
                } else {
                    setFinished(true);
                }
            };

            const speak = (text) => {
                const u = new SpeechSynthesisUtterance(text);
                u.lang = 'en-US'; u.rate = 0.8;
                window.speechSynthesis.speak(u);
            };

            if (list.length === 0 && !finished) return (
                <div className="h-screen flex flex-col items-center justify-center p-8 text-center bg-slate-50">
                    <div className="text-8xl mb-8 animate-bounce">✨</div>
                    <h2 className="text-4xl font-bold text-slate-800 mb-6">太棒了！目前沒有任務</h2>
                    <p className="text-xl text-slate-500 mb-8">休息一下，明天再來吧！</p>
                    <button onClick={onExit} className="px-10 py-4 bg-white border-2 border-slate-200 text-slate-600 rounded-2xl font-bold hover:bg-slate-50 hover:border-slate-300 transition-all text-xl shadow-sm">返回儀表板</button>
                </div>
            );

            if (finished) return (
                <div className="h-screen flex flex-col items-center justify-center p-8 text-center bg-violet-50">
                    <div className="text-9xl mb-8 animate-bounce">🎉</div>
                    <h2 className="text-5xl font-bold text-violet-900 mb-6">任務完成！</h2>
                    <p className="text-2xl text-violet-600/70 mb-10 font-bold">你的英語能力又提升了！</p>
                    <button onClick={onExit} className="btn-bounce px-12 py-5 bg-violet-600 text-white rounded-[2rem] font-bold shadow-xl text-2xl hover:bg-violet-700 transition-colors">返回儀表板</button>
                </div>
            );

            const item = list[idx];
            if (!item) return null;

            return (
                /* 採用全螢幕 Flex 佈局：手機垂直(flex-col)，電腦左右(flex-row) */
                <div className="min-h-screen flex flex-col md:flex-row bg-slate-50">
                    
                    {/* 左側資訊欄 (電腦版變寬) */}
                    <div className="p-6 md:p-10 flex md:flex-col md:w-80 md:border-r md:border-slate-200 md:bg-white justify-between items-center md:items-start shrink-0 z-20 shadow-sm md:shadow-none bg-white/80 backdrop-blur-md sticky top-0 md:relative">
                        <button onClick={onExit} className="w-12 h-12 flex items-center justify-center rounded-full bg-slate-100 text-slate-400 hover:text-red-500 hover:bg-red-50 transition-colors">
                            <i className="fa-solid fa-xmark text-2xl"></i>
                        </button>
                        
                        <div className="flex flex-col items-center md:items-start gap-1">
                             <div className={`font-bold px-4 py-2 rounded-xl text-lg ${mode==='learn'?'bg-violet-100 text-violet-600':'bg-amber-100 text-amber-600'}`}>
                                <i className={`fa-solid ${mode==='learn'?'fa-rocket':'fa-rotate-right'} mr-2`}></i>
                                {mode==='learn'?'新單字':'複習中'}
                            </div>
                            <div className="text-slate-400 font-bold text-sm md:mt-2">進度: <span className="text-slate-800 text-xl">{idx+1}</span> / {list.length}</div>
                        </div>

                        {/* 電腦版下方的裝飾或留白 */}
                        <div className="hidden md:block w-full">
                            <div className="h-2 w-full bg-slate-100 rounded-full overflow-hidden">
                                <div className="h-full bg-slate-800 transition-all duration-300" style={{width: `${((idx+1)/list.length)*100}%`}}></div>
                            </div>
                        </div>
                    </div>
                    
                    {/* 右側主要卡片區 */}
                    <div className="flex-1 flex flex-col items-center justify-start md:justify-center p-6 md:p-12 overflow-y-auto">
                        
                        {/* 巨型卡片容器 */}
                        <div className="w-full max-w-3xl mx-auto">
                            <div className={`relative w-full aspect-[3/4] md:aspect-[4/3] cursor-pointer card-perspective ${flipped ? 'flipped' : ''}`} onClick={() => setFlipped(!flipped)}>
                                <div className="card-inner card-shadow rounded-[3rem] bg-white">
                                    
                                    {/* 正面 (Front) */}
                                    <div className="card-front flex flex-col items-center justify-center p-10 md:p-16 border-b-[12px] border-violet-200 bg-white">
                                        <span className="absolute top-8 left-8 bg-violet-50 text-violet-600 text-sm md:text-base px-4 py-2 rounded-xl font-bold tracking-wider">{item.category}</span>
                                        <h2 className="text-7xl md:text-9xl font-bold text-slate-800 english-font mb-10 text-center break-words max-w-full leading-tight">
                                            {item.word}
                                        </h2>
                                        <button onClick={(e)=>{e.stopPropagation();speak(item.word)}} className="w-24 h-24 bg-violet-50 rounded-full text-violet-500 flex items-center justify-center hover:scale-110 transition-transform mb-6 border-2 border-violet-100 shadow-md">
                                            <i className="fa-solid fa-volume-high text-4xl"></i>
                                        </button>
                                        <p className="absolute bottom-8 text-slate-300 text-sm font-bold uppercase animate-pulse tracking-widest">點擊翻轉查看解釋</p>
                                    </div>
                                    
                                    {/* 背面 (Back) - 修復與放大 */}
                                    <div className="card-back flex flex-col items-center justify-center p-10 md:p-16 border-b-[12px] border-emerald-300 bg-white text-center">
                                        {item.image && (
                                            <div className="h-32 mb-6">
                                                <img src={`./images/${item.image}`} alt="" className="h-full object-contain" onError={(e) => {e.target.style.display='none'}} />
                                            </div>
                                        )}
                                        <h3 className="text-5xl md:text-7xl font-bold text-slate-800 mb-8">{item.meaning}</h3>
                                        {item.sentence && (
                                            <div className="p-6 bg-slate-50 rounded-3xl border border-slate-100 text-slate-500 italic text-xl md:text-2xl leading-relaxed shadow-inner w-full">
                                                "{item.sentence}"
                                            </div>
                                        )}
                                    </div>
                                </div>
                            </div>

                            {/* 底部操作按鈕 (巨大化) */}
                            <div className="w-full mt-10 md:mt-16 max-w-2xl mx-auto">
                                {!flipped ? (
                                    <button onClick={()=>setFlipped(true)} className="btn-bounce w-full py-6 bg-violet-600 text-white rounded-[2rem] font-bold text-2xl shadow-xl shadow-violet-200 hover:bg-violet-700 transition-colors">
                                        查看答案
                                    </button>
                                ) : (
                                    <div className="flex gap-6">
                                        <button onClick={()=>handleNext(false)} className="btn-bounce flex-1 py-6 bg-white text-rose-500 rounded-[2rem] font-bold text-2xl border-4 border-rose-100 hover:bg-rose-50 hover:border-rose-200 transition-colors">
                                            <i className="fa-solid fa-xmark mr-3"></i> 忘記
                                        </button>
                                        <button onClick={()=>handleNext(true)} className="btn-bounce flex-1 py-6 bg-emerald-500 text-white rounded-[2rem] font-bold text-2xl shadow-xl shadow-emerald-200 hover:bg-emerald-600 transition-colors">
                                            <i className="fa-solid fa-check mr-3"></i> 記得
                                        </button>
                                    </div>
                                )}
                            </div>
                        </div>
                    </div>
                </div>
            );
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>